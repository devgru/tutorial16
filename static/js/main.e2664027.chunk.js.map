{"version":3,"sources":["modules/currentPalette.js","modules/paletteList.js","modules/index.js","store.js","containers/tutorial-container/index.js","presentational/GithubCorner/index.js","presentational/Header/index.js","presentational/Page/index.js","presentational/NavigationItem/index.js","presentational/Navigation/index.js","presentational/TutorialPages/01-Title/index.js","utils/closestColorName.js","utils/delta.js","presentational/Chip/index.js","utils/farthestOf.js","presentational/InlineChip/index.js","vendor/threejs-orbit-controls.js","utils/createPointMesh.js","utils/createPlaneMesh.js","utils/colorToLabPoint.js","presentational/ColorSpace/index.js","utils/generatePoints.js","presentational/Delta/index.js","presentational/TutorialPages/02-Interactive/index.js","presentational/SchemeBlock/index.js","presentational/SchemeBar/index.js","presentational/Favicon/index.js","containers/tutorial/index.js","utils/colorToRgbPoint.js","utils/objectToArray.js","utils/colorToHsvPoint.js","utils/colorToHslPoint.js","utils/colorToRotatedRgbPoint.js","containers/tutorial-color-spaces/index.js","presentational/Matrix/index.js","presentational/TutorialPages/02-Intro/index.js","presentational/TutorialPages/04-ColorScheme/index.js","presentational/CodeExample/index.js","presentational/HueCircle/Tick.js","presentational/HueCircle/index.js","containers/tutorial-color-schemes/index.js","utils/generateAccents.js","presentational/SchemeTable/index.js","utils/rgb.js","presentational/Picker/index.js","containers/tutorial-create-scheme/index.js","containers/app/index.js","registerServiceWorker.js","index.js"],"names":["PALETTE_LOADING_STARTED","PALETTE_LOADED","SET_COLOR","initialState","componentToHex","c","hex","Math","round","toString","length","rgbToHex","r","g","b","group16ColorsToSlots","all","bg","slice","fg","BACKGROUND_COLORS_COUNT","accents","BASE_COLORS_COUNT","slots","push","role","colors","forEach","a","extractColorsFromPalette","palette","range","map","n","toUpperCase","loadBase16Palette","paletteKey","dispatch","getState","type","name","paletteList","palettes","setColor","index","color","combineReducers","router","routerReducer","currentPalette","state","action","slot","i","oldColor","j","rgb","history","createHistory","middleware","thunk","routerMiddleware","composedEnhancers","compose","applyMiddleware","store","createStore","rootReducer","scrollToAnchor","initial","mode","window","scrollRestoration","setScrollRestoration","hashParts","location","hash","split","scrollTo","target","document","querySelector","scrollIntoView","TutorialContainer","props","initialized","this","updateStyles","onhashchange","prevProps","base","style","documentElement","setProperty","Component","childContextTypes","PropTypes","arrayOf","string","GithubCorner","href","className","aria-label","width","height","viewBox","aria-hidden","d","fill","transformOrigin","children","page","id","inverse","disabled","isActive","activePage","join","cache","delta","c1","c2","key","getDeltaE00","toLab","lab","L","l","A","B","descriptor","ColorDescriptor","noop","Chip","onClick","textColor","maxBy","farthestOf","rgbColor","closestColor","R","G","closestColorName","hclColor","objectMap","hcl","h","description","describe","background","contextTypes","InlineChip","tabIndex","JSON","stringify","THREE","OrbitControls","object","domElement","undefined","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","event","clientX","clientY","preventDefault","focus","button","ctrlKey","metaKey","shiftKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","prototype","Object","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","projectToPlane","point","plane","centroid","normal","createPointMesh","colorToPoint","colorHex","transparent","opacity","getQuaternion","rotationMatrix","Matrix4","zeroPoint","Object3D","DefaultUp","setFromRotationMatrix","createPlaneMesh","colorToLabPoint","ColorSpace","context","tilt","debounce","isVisible","divRef","getBoundingClientRect","innerHeight","deltaDegree","interrupt","select","transition","duration","ease","easeSinInOut","tween","lastP","progress","controls","abs","renderScene","onManualRenderTriggerCreated","setState","cameraPositionZ","cameraPosition","gridOpacity","gridPoints","steps","result","gridStep","generatePoints","gridSteps","Controls","refs","camera","autoTilt","requestAnimationFrame","animationStep","palettePoints","projectedPoints","uniqPoints","uniqBy","uniqProjectedPoints","react3","mainCamera","clearColor","forceManualRender","ref","aspect","near","far","wrapped","partialVisibility","intervalCheck","scrollCheck","onChange","defaultProps","scheme","onLoadScheme","random","alea","int","from","to","base00","base07","accent","schemes","SIZE","Favicon","canvas","draw","getContext","forceUpdate","foreground","clearRect","fillStyle","fillRect","lineWidth","beginPath","lineTo","closePath","display","url","toDataURL","Tutorial","selectedPalettes","reduce","propTypes","shape","connect","concat","bindActionCreators","rgbTransform","colorToRgbPoint","objectToArray","o","k","axisY","colorToHsvPoint","cone","hsl","isNaN","rgbArray","M","m","C","S","hsv","s","rad","applyAxisAngle","calcHslTarget","biCone","axisX","axisZ","angleX","angleY","angleZ","atan","colorToRotatedRgbPoint","TutorialColorSpaces","colorToHslPoint","fn","language","hljs","overflowX","padding","fontStyle","fontWeight","showLineNumbers","lineNumberContainerStyle","float","paddingLeft","paddingRight","lineNumberStyle","clear","Tick","tick","size","strokeWidth","transform","TICKS","BIG_TICKS","HueCircle","stroke","cy","deltaE","inlineChip","selectColor","modifyCurrentColor","allInverted","reverse","CodeExample","generateAccents","midColor","scaleLinear","interpolate","interpolateHcl","baseScale","hues","bestAccents","bestAccentsRank","edgeDelta","hueDiffImpact","lH","some","newAccents","cos","sin","goodAccents","every","displayable","rank","sum","log","Map","SinglePicker","getNewColor","dimensions","model","limitX","limitY","newColor","isMouseDown","e","drawnColor","rs","scaledWidth","scaledHeight","colorToDisplay","imageData","context2d","createImageData","values","result1","rgbCached","data","putImageData","domain","clamp","styleInner","styleSvg","effectiveColor","cx","onMouseOut","Picker","onColorPicked","onClose","TutorialCreateScheme","currentColor","interpolatedBase","z","suggestedAccents","editColor","indices","colorPicker","isEqual","allColors","App","Route","exact","path","component","TutorialColorSchemes","pure","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","__REACT_DEVTOOLS_GLOBAL_HOOK__","render","URL","process","origin","fetch","response","status","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.e2664027.chunk.js","sourcesContent":["import { range } from 'd3-array';\nimport { rgb } from 'd3-color';\n\nexport const PALETTE_LOADING_STARTED = 'currentPalette/PALETTE_LOADING_STARTED';\nexport const PALETTE_LOADED = 'currentPalette/PALETTE_LOADED';\nexport const SET_COLOR = 'currentPalette/SET_COLOR';\n\nconst initialState = {};\n\nfunction componentToHex(c) {\n  const hex = Math.round(c).toString(16);\n  return hex.length === 1 ? '0' + hex : hex;\n}\n\nfunction rgbToHex({ r, g, b }) {\n  return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case SET_COLOR:\n      return {\n        ...state,\n        slots: state.slots.map((slot, i) => {\n          if (i !== action.index[0]) {\n            return slot;\n          }\n\n          return {\n            ...slot,\n            colors: slot.colors.map((oldColor, j) => {\n              if (j !== action.index[1]) {\n                return oldColor;\n              }\n              return rgbToHex(rgb(action.color));\n            }),\n          };\n        }),\n      };\n\n    case PALETTE_LOADING_STARTED:\n      return {};\n\n    case PALETTE_LOADED:\n      const { name, slots } = action;\n\n      return {\n        ...state,\n        name,\n        slots,\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst BACKGROUND_COLORS_COUNT = 4;\nconst FOREGROUND_COLORS_COUNT = 4;\nconst BASE_COLORS_COUNT = BACKGROUND_COLORS_COUNT + FOREGROUND_COLORS_COUNT;\nconst ACCENT_COLORS_COUNT = 8;\nconst ALL_COLORS_COUNT = BASE_COLORS_COUNT + ACCENT_COLORS_COUNT;\n\nexport const group16ColorsToSlots = all => {\n  const bg = all.slice(0, BACKGROUND_COLORS_COUNT);\n  const fg = all.slice(BACKGROUND_COLORS_COUNT, BASE_COLORS_COUNT);\n  const accents = all.slice(BASE_COLORS_COUNT, ALL_COLORS_COUNT);\n\n  const slots = [];\n\n  slots.push({\n    role: 'background',\n    colors: bg,\n  });\n\n  slots.push({\n    role: 'foreground',\n    colors: fg,\n  });\n\n  accents.forEach(a =>\n    slots.push({\n      role: 'accent',\n      colors: [a],\n    })\n  );\n\n  return slots;\n};\n\nexport const extractColorsFromPalette = palette =>\n  range(0, ALL_COLORS_COUNT).map(\n    n => '#' + palette['base0' + n.toString(16).toUpperCase()]\n  );\n\nexport const loadBase16Palette = paletteKey => async (dispatch, getState) => {\n  dispatch({\n    type: PALETTE_LOADING_STARTED,\n  });\n  const name = paletteKey;\n\n  const palette = getState().paletteList.palettes[paletteKey];\n  if (!palette) return;\n\n  const all = extractColorsFromPalette(palette);\n  const slots = group16ColorsToSlots(all);\n\n  dispatch({\n    type: PALETTE_LOADED,\n    name,\n    slots,\n  });\n};\n\nexport const setColor = (index, color) => dispatch => {\n  dispatch({\n    type: SET_COLOR,\n    index,\n    color,\n  });\n};\n","import palettes from '../base16-palettes';\nconst initialState = {\n  palettes: palettes,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n\nexport const loadPaletteUrls = () => async dispatch => {};\n","import { combineReducers } from 'redux';\nimport { routerReducer } from 'react-router-redux';\nimport currentPalette from './currentPalette';\nimport paletteList from './paletteList';\n\nexport default combineReducers({\n  router: routerReducer,\n  currentPalette,\n  paletteList,\n});\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport { routerMiddleware } from 'react-router-redux';\nimport thunk from 'redux-thunk';\nimport createHistory from 'history/createHashHistory';\nimport rootReducer from './modules';\n\nexport const history = createHistory();\n\nconst initialState = {};\nconst middleware = [thunk, routerMiddleware(history)];\n\nconst composedEnhancers = compose(applyMiddleware(...middleware));\n\nconst store = createStore(rootReducer, initialState, composedEnhancers);\n\nexport default store;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nlet setScrollRestoration = function(mode) {\n  const { history } = window;\n  if ('scrollRestoration' in history) {\n    history.scrollRestoration = mode;\n  }\n};\nconst scrollToAnchor = initial => {\n  setScrollRestoration('manual');\n  const hashParts = window.location.hash.split('#');\n  if (hashParts.length <= 2) {\n    if (initial) {\n      window.scrollTo(0, 0);\n    }\n    return;\n  }\n  const hash = hashParts.slice(-1)[0];\n  const target = document.querySelector(`#${hash}`);\n  if (!target) {\n    return;\n  }\n  target.scrollIntoView();\n};\n\nclass TutorialContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    if (!TutorialContainer.initialized) {\n      TutorialContainer.initialized = true;\n      props.loadBase16Palette('solarized-light');\n    }\n  }\n\n  componentDidMount() {\n    this.updateStyles();\n\n    scrollToAnchor(true);\n    window.onhashchange = scrollToAnchor;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.base && this.props.base) {\n      scrollToAnchor();\n      // Decode entities in the URL\n      // Sometimes a URL like #/foo#bar will be encoded as #/foo%23bar\n      // window.location.hash = window.decodeURIComponent(window.location.hash);\n    }\n    this.updateStyles();\n  }\n\n  updateStyles() {\n    const { base } = this.props;\n\n    if (!base) {\n      return;\n    }\n\n    const { style } = document.documentElement;\n    base.forEach((color, i) => {\n      style.setProperty('--color' + i, color);\n    });\n  }\n\n  getChildContext() {\n    const { base } = this.props;\n    return {\n      base,\n    };\n  }\n}\n\nTutorialContainer.childContextTypes = {\n  base: PropTypes.arrayOf(PropTypes.string),\n};\nTutorialContainer.propTypes = {\n  all: PropTypes.arrayOf(PropTypes.string),\n  currentPalette: PropTypes.shape({\n    palette: PropTypes.shape({\n      base: PropTypes.arrayOf(PropTypes.string),\n      accents: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n};\n\nexport default TutorialContainer;\n","import React from 'react';\n\nimport './index.css';\n\n// thanks @tholman!\n// http://tholman.com/github-corners/\n\nconst GithubCorner = () => (\n  <a\n    href=\"https://github.com/devgru/tutorial16\"\n    className=\"GithubCorner\"\n    aria-label=\"Исходники на GitHub\"\n  >\n    <svg width=\"80\" height=\"80\" viewBox=\"0 0 250 250\" aria-hidden=\"true\">\n      <path d=\"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z\" />\n      <path\n        d=\"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2\"\n        fill=\"currentColor\"\n        style={{ transformOrigin: '130px 106px' }}\n        className=\"GithubCorner-arm\"\n      />\n      <path\n        d=\"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z\"\n        fill=\"currentColor\"\n        className=\"GithubCorner-body\"\n      />\n    </svg>\n  </a>\n);\nexport default GithubCorner;\n","import React from 'react';\n\nimport './index.css';\n\nexport default ({ children, hash }) => {\n  const parts = window.location.hash.split('#');\n  const page = parts[1];\n\n  return (\n    <h2 className=\"Header\">\n      <a className=\"Header-hash\" href={'#' + page + '#' + hash}>\n        #\n      </a>\n      <a id={hash}>{children}</a>\n    </h2>\n  );\n};\n","import React from 'react';\n\nimport './index.css';\n\nexport default ({ children, inverse }) =>\n  (inverse && (\n    <div>\n      <div className=\"Tutorial-page Tutorial-page_inverse_open\" />\n      <div className=\"Tutorial-page Tutorial-page_inverse\">{children}</div>\n      <div className=\"Tutorial-page Tutorial-page_inverse_close\" />\n    </div>\n  )) || <div className=\"Tutorial-page\">{children}</div>;\n","import React from 'react';\n\nimport './index.css';\n\nexport default ({ disabled, page, children, activePage }) => {\n  const isActive = activePage === page;\n  const className = [\n    `Navigation-item`,\n    `${disabled ? 'disabled' : ''}`,\n    `${isActive ? 'active' : ''}`,\n  ].join(' ');\n  return (\n    <li className={className}>\n      {isActive || disabled ? (\n        <span>{children}</span>\n      ) : (\n        <a href={`#${page}`}>{children}</a>\n      )}\n    </li>\n  );\n};\n","import React from 'react';\n\nimport './index.css';\nimport NavigationItem from '../NavigationItem';\n\nexport default () => {\n  const hashParts = window.location.hash.split('#');\n  const activePage = hashParts[1];\n  return (\n    <ul className=\"Navigation\">\n      <NavigationItem activePage={activePage} page=\"/\">\n        Стартовая\n      </NavigationItem>\n      {/*<NavigationItem activePage={activePage} page=\"/math\">\n        Математика RGB\n      </NavigationItem>*/}\n      <NavigationItem activePage={activePage} page=\"/color-spaces\">\n        Цветовые модели\n      </NavigationItem>\n      <NavigationItem activePage={activePage} page=\"/color-schemes\">\n        Цветовые схемы\n      </NavigationItem>\n      <NavigationItem activePage={activePage} disabled>\n        Создание схемы\n      </NavigationItem>\n    </ul>\n  );\n};\n","import React from 'react';\nimport Header from '../../Header';\nimport Page from '../../Page';\nimport Navigation from '../../Navigation';\n\nexport default () => (\n  <Page>\n    <div className=\"Tutorial-text\">\n      <h1>Цветовые&nbsp;модели и схемы</h1>\n      <p>\n        <a href=\"https://devg.ru\">Дима Семьюшкин</a>, 2018&thinsp;–&thinsp;2022\n      </p>\n    </div>\n    <Navigation />\n    <div className=\"Tutorial-text\">\n      <Header hash=\"intro\">Предисловие</Header>\n      <p>\n        Я программирую почти всю жизнь и работа с цветом всегда была одной из\n        моих любимых тем.\n      </p>\n      <p>\n        Через несколько лет после начала карьеры у меня появился интерес к\n        визуализации данных. В 2014 я присоединился к{' '}\n        <a href=\"http://datalaboratory.ru/\">Лаборатории Данных</a> и получил\n        возможность на практике увидеть, как цвет помогает считывать информацию\n        и организовывать интерфейс.\n      </p>\n      <p>\n        Отдельным интересом стало изучение и сравнение цветовых схем. К\n        сожалению, большинство руководств и статей описывают примитивный взгляд\n        на эту задачу и сводятся к перемещению точек на цветовом круге и перечню\n        «контраст, триада, тетрада…». Они не учитывают неравномерность\n        RGB-пространства и проблемы определения яркости. А некоторые ссылаются\n        на цветовую модель RYB, скорее полезную в живописи чем в цифровом мире.\n      </p>\n      <p>\n        В этой статье я пытаюсь наглядно пересказать своё понимание упомянутых\n        тем и дать интерактивные инструменты для экспериментирования.\n      </p>\n    </div>\n  </Page>\n);\n","import closestColor from 'closest-color/src/match.js';\n\nconst cache = {};\nexport default function closestColorName({ r, g, b }) {\n  const name = `${r}-${g}-${b}`;\n  if (!cache[name]) {\n    cache[name] = closestColor({ R: r, G: g, B: b }).name;\n  }\n  return cache[name];\n}\n","import { getDeltaE00 } from 'delta-e';\nimport { lab } from 'd3-color';\n\nconst cache = {};\n\nexport default function delta(c1, c2) {\n  const key = c1 + c2;\n  if (!cache[key]) {\n    cache[key] = cache[c2 + c1] = getDeltaE00(toLab(c1), toLab(c2));\n  }\n  return cache[key];\n}\n\nfunction toLab(color) {\n  const { l, a, b } = lab(color);\n  return {\n    L: l,\n    A: a,\n    B: b,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport objectMap from 'object-map';\nimport { rgb, hcl } from 'd3-color';\nimport ColorDescriptor from 'color-descriptor';\n\nimport closestColorName from '../../utils/closestColorName';\n\nimport './index.css';\nimport farthestOf from '../../utils/farthestOf';\n\nconst descriptor = new ColorDescriptor('ru');\n\nconst noop = () => {};\n\nconst Chip = ({ color, onClick = noop }, { base }) => {\n  const textColors = [base[0], base[base.length - 1]];\n  const textColor = farthestOf(color, textColors);\n  const rgbColor = rgb(color);\n  const { r, g, b } = rgbColor;\n  const name = closestColorName(rgbColor);\n\n  const hclColor = objectMap(hcl(color), Math.round);\n  if (hclColor.c === 0) hclColor.h = 'any';\n  const { h, c, l } = hclColor;\n  const description = descriptor.describe(color).join(', ');\n\n  return (\n    <span\n      onClick={onClick}\n      className=\"Chip\"\n      style={{\n        background: color,\n        color: textColor,\n      }}\n    >\n      <span className=\"ChipProperties\">{name}</span>\n      <span className=\"ChipProperties\">{description}</span>\n      <span className=\"ChipProperties\">{rgbColor.hex().toUpperCase()}</span>\n      <span className=\"ChipProperties\">\n        R: {Math.round(r)}, G: {Math.round(g)}, B: {Math.round(b)}\n      </span>\n      <span className=\"ChipProperties\">\n        H: {h}, C: {c}, L: {l}\n      </span>\n    </span>\n  );\n};\n\nChip.contextTypes = {\n  base: PropTypes.arrayOf(PropTypes.string),\n};\n\nexport default Chip;\n","import delta from './delta';\nimport maxBy from 'lodash.maxby';\n\nexport default function farthestOf(color, colors) {\n  return maxBy(colors, c => delta(c, color));\n}\n","import React from 'react';\nimport Chip from '../Chip';\nimport './index.css';\n\nconst InlineChip = ({ color }, { base }) => {\n  return (\n    <span\n      className=\"InlineChip\"\n      style={{\n        background: color,\n      }}\n      tabIndex=\"0\"\n    >\n      {JSON.stringify(base)}\n      <span className=\"InlineChip-hover\">\n        <Chip color={color} />\n      </span>\n    </span>\n  );\n};\n\nexport default InlineChip;\n","export default function(THREE) {\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n\n  // This set of controls performs orbiting, dollying (zooming), and panning.\n  // Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n  //\n  //    Orbit - left mouse / touch: one-finger move\n  //    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n  //    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\n  THREE.OrbitControls = function(object, domElement) {\n    this.object = object;\n\n    this.domElement = domElement !== undefined ? domElement : document;\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    this.target = new THREE.Vector3();\n\n    // How far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // How far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.25;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.panSpeed = 1.0;\n    this.screenSpacePanning = false; // if true, pan in screen-space\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n    // Set to false to disable use of the keys\n    this.enableKeys = true;\n\n    // The four arrow keys\n    this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n    // Mouse buttons\n    this.mouseButtons = {\n      LEFT: THREE.MOUSE.LEFT,\n      MIDDLE: THREE.MOUSE.MIDDLE,\n      RIGHT: THREE.MOUSE.RIGHT,\n    };\n\n    // for reset\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    //\n    // public methods\n    //\n\n    this.getPolarAngle = function() {\n      return spherical.phi;\n    };\n\n    this.getAzimuthalAngle = function() {\n      return spherical.theta;\n    };\n\n    this.saveState = function() {\n      scope.target0.copy(scope.target);\n      scope.position0.copy(scope.object.position);\n      scope.zoom0 = scope.object.zoom;\n    };\n\n    this.reset = function() {\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.zoom = scope.zoom0;\n\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n\n      scope.update();\n\n      state = STATE.NONE;\n    };\n\n    // this method is exposed, but perhaps it would be better if we can make it private...\n    this.update = (function() {\n      var offset = new THREE.Vector3();\n\n      // so camera.up is the orbit axis\n      var quat = new THREE.Quaternion().setFromUnitVectors(\n        object.up,\n        new THREE.Vector3(0, 1, 0)\n      );\n      var quatInverse = quat.clone().inverse();\n\n      var lastPosition = new THREE.Vector3();\n      var lastQuaternion = new THREE.Quaternion();\n\n      return function update() {\n        var position = scope.object.position;\n\n        offset.copy(position).sub(scope.target);\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat);\n\n        // angle from z-axis around y-axis\n        spherical.setFromVector3(offset);\n\n        if (scope.autoRotate && state === STATE.NONE) {\n          rotateLeft(getAutoRotationAngle());\n        }\n\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n\n        // restrict theta to be between desired limits\n        spherical.theta = Math.max(\n          scope.minAzimuthAngle,\n          Math.min(scope.maxAzimuthAngle, spherical.theta)\n        );\n\n        // restrict phi to be between desired limits\n        spherical.phi = Math.max(\n          scope.minPolarAngle,\n          Math.min(scope.maxPolarAngle, spherical.phi)\n        );\n\n        spherical.makeSafe();\n\n        spherical.radius *= scale;\n\n        // restrict radius to be between desired limits\n        spherical.radius = Math.max(\n          scope.minDistance,\n          Math.min(scope.maxDistance, spherical.radius)\n        );\n\n        // move target to panned location\n        scope.target.add(panOffset);\n\n        offset.setFromSpherical(spherical);\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse);\n\n        position.copy(scope.target).add(offset);\n\n        scope.object.lookAt(scope.target);\n\n        if (scope.enableDamping === true) {\n          sphericalDelta.theta *= 1 - scope.dampingFactor;\n          sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n          panOffset.multiplyScalar(1 - scope.dampingFactor);\n        } else {\n          sphericalDelta.set(0, 0, 0);\n\n          panOffset.set(0, 0, 0);\n        }\n\n        scale = 1;\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(scope.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n        ) {\n          scope.dispatchEvent(changeEvent);\n\n          lastPosition.copy(scope.object.position);\n          lastQuaternion.copy(scope.object.quaternion);\n          zoomChanged = false;\n\n          return true;\n        }\n\n        return false;\n      };\n    })();\n\n    this.dispose = function() {\n      scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n      scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n      scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n      scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n      scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n      scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      window.removeEventListener('keydown', onKeyDown, false);\n\n      //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n    };\n\n    //\n    // internals\n    //\n\n    var scope = this;\n\n    var changeEvent = { type: 'change' };\n    var startEvent = { type: 'start' };\n    var endEvent = { type: 'end' };\n\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_DOLLY_PAN: 4,\n    };\n\n    var state = STATE.NONE;\n\n    var EPS = 0.000001;\n\n    // current position in spherical coordinates\n    var spherical = new THREE.Spherical();\n    var sphericalDelta = new THREE.Spherical();\n\n    var scale = 1;\n    var panOffset = new THREE.Vector3();\n    var zoomChanged = false;\n\n    var rotateStart = new THREE.Vector2();\n    var rotateEnd = new THREE.Vector2();\n    var rotateDelta = new THREE.Vector2();\n\n    var panStart = new THREE.Vector2();\n    var panEnd = new THREE.Vector2();\n    var panDelta = new THREE.Vector2();\n\n    var dollyStart = new THREE.Vector2();\n    var dollyEnd = new THREE.Vector2();\n    var dollyDelta = new THREE.Vector2();\n\n    function getAutoRotationAngle() {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n\n    function rotateLeft(angle) {\n      sphericalDelta.theta -= angle;\n    }\n\n    function rotateUp(angle) {\n      sphericalDelta.phi -= angle;\n    }\n\n    this.rotateLeft = rotateLeft;\n    this.rotateUp = rotateUp;\n\n    var panLeft = (function() {\n      var v = new THREE.Vector3();\n\n      return function panLeft(distance, objectMatrix) {\n        v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n        v.multiplyScalar(-distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    var panUp = (function() {\n      var v = new THREE.Vector3();\n\n      return function panUp(distance, objectMatrix) {\n        if (scope.screenSpacePanning === true) {\n          v.setFromMatrixColumn(objectMatrix, 1);\n        } else {\n          v.setFromMatrixColumn(objectMatrix, 0);\n          v.crossVectors(scope.object.up, v);\n        }\n\n        v.multiplyScalar(distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    // deltaX and deltaY are in pixels; right and down are positive\n    var pan = (function() {\n      var offset = new THREE.Vector3();\n\n      return function pan(deltaX, deltaY) {\n        var element =\n          scope.domElement === document\n            ? scope.domElement.body\n            : scope.domElement;\n\n        if (scope.object.isPerspectiveCamera) {\n          // perspective\n          var position = scope.object.position;\n          offset.copy(position).sub(scope.target);\n          var targetDistance = offset.length();\n\n          // half of the fov is center to top of screen\n          targetDistance *= Math.tan(\n            ((scope.object.fov / 2) * Math.PI) / 180.0\n          );\n\n          // we use only clientHeight here so aspect ratio does not distort speed\n          panLeft(\n            (2 * deltaX * targetDistance) / element.clientHeight,\n            scope.object.matrix\n          );\n          panUp(\n            (2 * deltaY * targetDistance) / element.clientHeight,\n            scope.object.matrix\n          );\n        } else if (scope.object.isOrthographicCamera) {\n          // orthographic\n          panLeft(\n            (deltaX * (scope.object.right - scope.object.left)) /\n              scope.object.zoom /\n              element.clientWidth,\n            scope.object.matrix\n          );\n          panUp(\n            (deltaY * (scope.object.top - scope.object.bottom)) /\n              scope.object.zoom /\n              element.clientHeight,\n            scope.object.matrix\n          );\n        } else {\n          // camera neither orthographic nor perspective\n          console.warn(\n            'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'\n          );\n          scope.enablePan = false;\n        }\n      };\n    })();\n\n    function dollyIn(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(\n          scope.minZoom,\n          Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n        scope.enableZoom = false;\n      }\n    }\n\n    function dollyOut(dollyScale) {\n      if (scope.object.isPerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.zoom = Math.max(\n          scope.minZoom,\n          Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n        scope.enableZoom = false;\n      }\n    }\n\n    //\n    // event callbacks - update the object state\n    //\n\n    function handleMouseDownRotate(event) {\n      //console.log( 'handleMouseDownRotate' );\n\n      rotateStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownDolly(event) {\n      //console.log( 'handleMouseDownDolly' );\n\n      dollyStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseDownPan(event) {\n      //console.log( 'handleMouseDownPan' );\n\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    function handleMouseMoveRotate(event) {\n      //console.log( 'handleMouseMoveRotate' );\n\n      rotateEnd.set(event.clientX, event.clientY);\n\n      rotateDelta\n        .subVectors(rotateEnd, rotateStart)\n        .multiplyScalar(scope.rotateSpeed);\n\n      var element =\n        scope.domElement === document\n          ? scope.domElement.body\n          : scope.domElement;\n\n      rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n      rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n      rotateStart.copy(rotateEnd);\n\n      scope.update();\n    }\n\n    function handleMouseMoveDolly(event) {\n      //console.log( 'handleMouseMoveDolly' );\n\n      dollyEnd.set(event.clientX, event.clientY);\n\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        dollyIn(getZoomScale());\n      } else if (dollyDelta.y < 0) {\n        dollyOut(getZoomScale());\n      }\n\n      dollyStart.copy(dollyEnd);\n\n      scope.update();\n    }\n\n    function handleMouseMovePan(event) {\n      //console.log( 'handleMouseMovePan' );\n\n      panEnd.set(event.clientX, event.clientY);\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n\n      scope.update();\n    }\n\n    function handleMouseUp(event) {\n      // console.log( 'handleMouseUp' );\n    }\n\n    function handleMouseWheel(event) {\n      // console.log( 'handleMouseWheel' );\n\n      if (event.deltaY < 0) {\n        dollyOut(getZoomScale());\n      } else if (event.deltaY > 0) {\n        dollyIn(getZoomScale());\n      }\n\n      scope.update();\n    }\n\n    function handleKeyDown(event) {\n      //console.log( 'handleKeyDown' );\n\n      // prevent the browser from scrolling on cursor up/down\n\n      event.preventDefault();\n\n      switch (event.keyCode) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n      }\n    }\n\n    function handleTouchStartRotate(event) {\n      //console.log( 'handleTouchStartRotate' );\n\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    }\n\n    function handleTouchStartDollyPan(event) {\n      //console.log( 'handleTouchStartDollyPan' );\n\n      if (scope.enableZoom) {\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        dollyStart.set(0, distance);\n      }\n\n      if (scope.enablePan) {\n        var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        panStart.set(x, y);\n      }\n    }\n\n    function handleTouchMoveRotate(event) {\n      //console.log( 'handleTouchMoveRotate' );\n\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n      rotateDelta\n        .subVectors(rotateEnd, rotateStart)\n        .multiplyScalar(scope.rotateSpeed);\n\n      var element =\n        scope.domElement === document\n          ? scope.domElement.body\n          : scope.domElement;\n\n      rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n      rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n      rotateStart.copy(rotateEnd);\n\n      scope.update();\n    }\n\n    function handleTouchMoveDollyPan(event) {\n      //console.log( 'handleTouchMoveDollyPan' );\n\n      if (scope.enableZoom) {\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        dollyEnd.set(0, distance);\n\n        dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n        dollyIn(dollyDelta.y);\n\n        dollyStart.copy(dollyEnd);\n      }\n\n      if (scope.enablePan) {\n        var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n        var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n        panEnd.set(x, y);\n\n        panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n        pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n      }\n\n      scope.update();\n    }\n\n    function handleTouchEnd(event) {\n      //console.log( 'handleTouchEnd' );\n    }\n\n    //\n    // event handlers - FSM: listen for events and reset state\n    //\n\n    function onMouseDown(event) {\n      if (scope.enabled === false) return;\n\n      // Prevent the browser from scrolling.\n\n      event.preventDefault();\n\n      // Manually set the focus since calling preventDefault above\n      // prevents the browser from setting it automatically.\n\n      scope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n      switch (event.button) {\n        case scope.mouseButtons.LEFT:\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            if (scope.enablePan === false) return;\n\n            handleMouseDownPan(event);\n\n            state = STATE.PAN;\n          } else {\n            if (scope.enableRotate === false) return;\n\n            handleMouseDownRotate(event);\n\n            state = STATE.ROTATE;\n          }\n\n          break;\n\n        case scope.mouseButtons.MIDDLE:\n          if (scope.enableZoom === false) return;\n\n          handleMouseDownDolly(event);\n\n          state = STATE.DOLLY;\n\n          break;\n\n        case scope.mouseButtons.RIGHT:\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n\n          break;\n      }\n\n      if (state !== STATE.NONE) {\n        document.addEventListener('mousemove', onMouseMove, false);\n        document.addEventListener('mouseup', onMouseUp, false);\n\n        scope.dispatchEvent(startEvent);\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      switch (state) {\n        case STATE.ROTATE:\n          if (scope.enableRotate === false) return;\n\n          handleMouseMoveRotate(event);\n\n          break;\n\n        case STATE.DOLLY:\n          if (scope.enableZoom === false) return;\n\n          handleMouseMoveDolly(event);\n\n          break;\n\n        case STATE.PAN:\n          if (scope.enablePan === false) return;\n\n          handleMouseMovePan(event);\n\n          break;\n      }\n    }\n\n    function onMouseUp(event) {\n      if (scope.enabled === false) return;\n\n      handleMouseUp(event);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      scope.dispatchEvent(endEvent);\n\n      state = STATE.NONE;\n    }\n\n    function onMouseWheel(event) {\n      if (\n        scope.enabled === false ||\n        scope.enableZoom === false ||\n        (state !== STATE.NONE && state !== STATE.ROTATE)\n      )\n        return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.dispatchEvent(startEvent);\n\n      handleMouseWheel(event);\n\n      scope.dispatchEvent(endEvent);\n    }\n\n    function onKeyDown(event) {\n      if (\n        scope.enabled === false ||\n        scope.enableKeys === false ||\n        scope.enablePan === false\n      )\n        return;\n\n      handleKeyDown(event);\n    }\n\n    function onTouchStart(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n\n          handleTouchStartRotate(event);\n\n          state = STATE.TOUCH_ROTATE;\n\n          break;\n\n        case 2: // two-fingered touch: dolly-pan\n          if (scope.enableZoom === false && scope.enablePan === false) return;\n\n          handleTouchStartDollyPan(event);\n\n          state = STATE.TOUCH_DOLLY_PAN;\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) {\n        scope.dispatchEvent(startEvent);\n      }\n    }\n\n    function onTouchMove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n          if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n          handleTouchMoveRotate(event);\n\n          break;\n\n        case 2: // two-fingered touch: dolly-pan\n          if (scope.enableZoom === false && scope.enablePan === false) return;\n          if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n          handleTouchMoveDollyPan(event);\n\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n    }\n\n    function onTouchEnd(event) {\n      if (scope.enabled === false) return;\n\n      handleTouchEnd(event);\n\n      scope.dispatchEvent(endEvent);\n\n      state = STATE.NONE;\n    }\n\n    function onContextMenu(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n    }\n\n    //\n\n    scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n    scope.domElement.addEventListener('mousedown', onMouseDown, false);\n    scope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n    scope.domElement.addEventListener('touchstart', onTouchStart, false);\n    scope.domElement.addEventListener('touchend', onTouchEnd, false);\n    scope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n    window.addEventListener('keydown', onKeyDown, false);\n\n    // force an update at start\n\n    this.update();\n  };\n\n  THREE.OrbitControls.prototype = Object.create(\n    THREE.EventDispatcher.prototype\n  );\n  THREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\n  Object.defineProperties(THREE.OrbitControls.prototype, {\n    center: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .center has been renamed to .target'\n        );\n        return this.target;\n      },\n    },\n\n    // backward compatibility\n\n    noZoom: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'\n        );\n        return !this.enableZoom;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'\n        );\n        this.enableZoom = !value;\n      },\n    },\n\n    noRotate: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        return !this.enableRotate;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        this.enableRotate = !value;\n      },\n    },\n\n    noPan: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'\n        );\n        return !this.enablePan;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'\n        );\n        this.enablePan = !value;\n      },\n    },\n\n    noKeys: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'\n        );\n        return !this.enableKeys;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'\n        );\n        this.enableKeys = !value;\n      },\n    },\n\n    staticMoving: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        return !this.enableDamping;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        this.enableDamping = !value;\n      },\n    },\n\n    dynamicDampingFactor: {\n      get: function() {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        return this.dampingFactor;\n      },\n\n      set: function(value) {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        this.dampingFactor = value;\n      },\n    },\n  });\n\n  return THREE.OrbitControls;\n}\n","import React from 'react';\n\nconst pointSize = 1.5;\n\nconst projectToPlane = (point, plane) => {\n  const { centroid, normal } = plane;\n  point.sub(\n    normal.clone().multiplyScalar(normal.dot(point.clone().sub(centroid)))\n  );\n};\n\nexport default function createPointMesh(\n  colorToPoint,\n  color,\n  a = 1,\n  plane = null\n) {\n  const colorHex = color.hex();\n  const point = colorToPoint(color);\n  if (plane) {\n    projectToPlane(point, plane);\n  }\n\n  return (\n    <mesh key={`${colorHex}-${a}`} position={point}>\n      <meshBasicMaterial transparent opacity={a} color={colorHex} />\n      <sphereGeometry radius={pointSize} />\n    </mesh>\n  );\n}\n","import React from 'react';\n\nimport { Matrix4, Vector3, Quaternion, Object3D } from 'three';\n\nconst getQuaternion = normal => {\n  const rotationMatrix = new Matrix4();\n  const zeroPoint = new Vector3();\n  const quaternion = new Quaternion();\n\n  rotationMatrix.lookAt(zeroPoint, normal, Object3D.DefaultUp);\n  quaternion.setFromRotationMatrix(rotationMatrix);\n\n  return quaternion;\n};\n\nexport default function createPlaneMesh(plane) {\n  if (!plane) {\n    return null;\n  }\n  const { centroid, normal, color } = plane;\n  return (\n    <line key=\"plane\" position={centroid} quaternion={getQuaternion(normal)}>\n      <circleGeometry radius={50} />\n      <lineBasicMaterial color={color.hex()} />\n    </line>\n  );\n}\n","import { Vector3 } from 'three';\nimport { lab } from 'd3-color';\n\nexport default function colorToLabPoint(color) {\n  const { l, a, b } = lab(color);\n  return new Vector3(b, 2.0612 * (-50 + l), -a);\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Sensor from 'react-visibility-sensor';\nimport React3 from 'react-three-renderer';\nimport * as THREE from 'three';\nimport OrbitControls from '../../vendor/threejs-orbit-controls';\nimport { rgb } from 'd3-color';\nimport { easeSinInOut } from 'd3-ease';\nimport { select } from 'd3-selection';\nimport { interrupt } from 'd3-transition';\nimport uniqBy from 'lodash.uniqby';\nimport debounce from 'lodash.debounce';\n\nimport generatePoints from '../../utils/generatePoints';\nimport createPlaneMesh from '../../utils/createPlaneMesh';\nimport createPointMesh from '../../utils/createPointMesh';\nimport colorToLabPoint from '../../utils/colorToLabPoint';\n\nclass ColorSpace extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    const cameraPositionZ = props.cameraPositionZ || 400;\n    this.cameraPosition = new THREE.Vector3(0, 0, cameraPositionZ);\n\n    const colorToPoint = props.colorToPoint || colorToLabPoint;\n    const gridOpacity = props.gridOpacity || 0.1;\n    const gridSteps = props.gridSteps || 5;\n    const gridPoints = generatePoints(colorToPoint, gridSteps, gridOpacity);\n    this.lastPosition = 0;\n    this.state = {\n      colorToPoint,\n      gridPoints,\n      renderScene: () => {},\n    };\n  }\n\n  componentDidMount() {\n    const Controls = OrbitControls(THREE);\n    this.controls = new Controls(this.refs.camera, this.divRef);\n    this.controls.enableKeys = false;\n    this.controls.enableZoom = false;\n    this.controls.autoRotate = this.props.autoRotate;\n\n    this.renderScene = () => {\n      this.state.renderScene();\n    };\n    this.controls.addEventListener('start', this.renderScene);\n    this.controls.addEventListener('change', this.renderScene);\n    this.controls.addEventListener('end', this.renderScene);\n\n    if (this.props.autoTilt) {\n      window.addEventListener('scroll', this.tilt);\n    }\n  }\n\n  tilt = debounce(() => {\n    if (!this.isVisible) {\n      return;\n    }\n\n    const r = this.divRef.getBoundingClientRect();\n    const position = r.bottom + r.top - window.innerHeight;\n\n    const { lastPosition } = this;\n    this.lastPosition = position;\n\n    const deltaPx = position - lastPosition;\n    const deltaDegree = deltaPx / (6 * 100);\n\n    interrupt(this);\n    select(this)\n      .transition()\n      .duration(600)\n      .ease(easeSinInOut)\n      .tween('', () => {\n        let lastP = 0;\n        return progress => {\n          const delta = (progress - lastP) * deltaDegree;\n          lastP = progress;\n\n          this.controls.rotateUp(delta);\n          this.controls.rotateLeft(Math.abs(delta));\n          this.controls.update();\n          this.state.renderScene();\n        };\n      });\n    // .on('start', () => {console.log('start')})\n    // .on('interrupt', () => {console.log('interrupt')})\n    // .on('end', () => {console.log('end')})\n  }, 30);\n\n  animationStep() {\n    if (!this.isVisible) {\n      return;\n    }\n    if (this.controls) {\n      this.controls.update();\n    }\n    requestAnimationFrame(() => this.animationStep());\n  }\n\n  componentWillUnmount() {\n    this.controls.dispose();\n    delete this.controls;\n    if (this.props.autoTilt) {\n      window.removeEventListener('scroll', this.tilt);\n    }\n  }\n\n  onManualRenderTriggerCreated = renderScene => {\n    this.setState({ renderScene });\n    renderScene();\n  };\n\n  componentDidUpdate() {\n    this.state.renderScene();\n  }\n\n  render() {\n    const { gridPoints } = this.state;\n    const {\n      colors,\n      background,\n      plane,\n      accents = [],\n      width,\n      height,\n      autoRotate,\n      autoTilt,\n    } = this.props;\n    const { base } = this.context;\n\n    const palettePoints = colors.map(color =>\n      createPointMesh(this.state.colorToPoint, rgb(color), 1)\n    );\n    const projectedPoints = accents.map(color =>\n      createPointMesh(this.state.colorToPoint, rgb(color), 0.7, plane)\n    );\n    const uniqPoints = uniqBy(palettePoints, a => a.key);\n    const uniqProjectedPoints = uniqBy(projectedPoints, a => a.key);\n\n    const onVisibilityChange = isVisible => {\n      this.isVisible = isVisible;\n      isVisible && this.animationStep();\n    };\n\n    const react3 = (\n      <React3\n        mainCamera=\"camera\"\n        width={width}\n        height={height}\n        clearColor={background || base[0]}\n        forceManualRender\n        onManualRenderTriggerCreated={this.onManualRenderTriggerCreated}\n      >\n        <scene>\n          <perspectiveCamera\n            name=\"camera\"\n            ref=\"camera\"\n            fov={50}\n            aspect={width / height}\n            near={10}\n            far={1000}\n            position={this.cameraPosition}\n          />\n          {createPlaneMesh(plane)}\n          {gridPoints}\n          {uniqPoints}\n          {uniqProjectedPoints}\n        </scene>\n      </React3>\n    );\n\n    const wrapped =\n      autoRotate || autoTilt ? (\n        <Sensor\n          partialVisibility\n          intervalCheck={false}\n          scrollCheck\n          onChange={onVisibilityChange}\n        >\n          {react3}\n        </Sensor>\n      ) : (\n        react3\n      );\n\n    return (\n      <div\n        className=\"ColorSpace\"\n        ref={ref => (this.divRef = ref)}\n        style={{\n          width: `${width}px`,\n          height: `${height}px`,\n        }}\n      >\n        {wrapped}\n      </div>\n    );\n  }\n}\n\nColorSpace.contextTypes = {\n  base: PropTypes.arrayOf(PropTypes.string),\n};\n\nColorSpace.propTypes = {\n  colors: PropTypes.arrayOf(PropTypes.string),\n};\n\nColorSpace.defaultProps = {\n  colors: [],\n};\n\nexport default ColorSpace;\n","import createPointMesh from './createPointMesh';\nimport { rgb } from 'd3-color';\n\nexport default function generatePoints(colorToPoint, steps, opacity) {\n  const result = [];\n  const gridStep = 255 / steps;\n  for (let r = 0; r <= 255; r += gridStep) {\n    for (let g = 0; g <= 255; g += gridStep) {\n      for (let b = 0; b <= 255; b += gridStep) {\n        result.push(createPointMesh(colorToPoint, rgb(r, g, b), opacity));\n      }\n    }\n  }\n\n  return result;\n}\n","import React from 'react';\n\nimport InlineChip from '../InlineChip';\nimport delta from '../../utils/delta';\n\nimport './index.css';\n\nexport default ({ c1, c2 }) => (\n  <span className=\"Delta\">\n    ΔE(\n    <InlineChip color={c1} />, <InlineChip color={c2} />) ={' '}\n    {Math.round(delta(c1, c2))}\n  </span>\n);\n","import Header from '../../Header';\nimport React from 'react';\nimport InlineChip from '../../InlineChip';\nimport ColorSpace from '../../ColorSpace';\nimport Page from '../../Page';\nimport Delta from '../../Delta';\n\nexport default ({ base }) => (\n  <Page inverse>\n    <div className=\"Tutorial-text\">\n      <Header hash=\"interactive-elements\">Интерактивные элементы</Header>\n      <p>\n        Эта статья создана, чтобы дать вам возможность не только узнать новое,\n        но и сразу применить эти знания. Для этого используется набор\n        интерактивных элементов, позволяющий изучать, сравнивать и оценивать\n        цвета.\n      </p>\n      <p>\n        Простейший из них — цветной квадрат с примером цвета:{' '}\n        <InlineChip color=\"#00FF55\" />. Он реагирует на наведение курсора или\n        клик, во всплывающем блоке показывается «чип» — цветовая плашка с\n        названием цвета из базы имён, предполагаемыми субъективными\n        характеристиками и координатами в моделях RGB и HCL.\n      </p>\n      <p>\n        Для описания различия пар цветов используется представление в виде\n        формулы цветового различия: <Delta c1=\"#FF0\" c2=\"#00F\" />. Оно\n        объясняется и используется в блоке «Цветовые схемы».\n      </p>\n      <p>\n        Наборы цветов изображены на трёхмерных визуализациях в контексте\n        цветовых моделей. Каждую можно покрутить курсором или пальцем.\n        Попробуйте:\n      </p>\n    </div>\n    <div className=\"Tutorial-wide\">\n      <ColorSpace\n        width={600}\n        height={400}\n        background={base[7]}\n        gridOpacity={1}\n        autoTilt\n      />\n    </div>\n  </Page>\n);\n","import React from 'react';\n\nimport './index.css';\n\nimport { range } from 'd3-array';\nimport { alea } from 'seedrandom';\n\nconst accents = range(8, 16).map(r => `base0${r.toString(16).toUpperCase()}`);\n\nexport default ({ id, scheme, onLoadScheme }) => {\n  const random = alea(id);\n  const int = (from, to) => Math.round(random() * (to - from)) + from;\n  return (\n    <div\n      className=\"SchemeBlock\"\n      style={{\n        background: '#' + scheme.base00,\n        color: '#' + scheme.base07,\n      }}\n      onClick={() => onLoadScheme(id)}\n    >\n      {id}\n      <div className=\"SchemeBlockPoints\">\n        {accents.map((accent, i) => (\n          <div\n            className=\"SchemeBlockPoint\"\n            key={accent}\n            style={{\n              background: '#' + scheme[accent],\n              left: `${i * 15 + int(8, 15)}px`,\n              bottom: `${int(3, 6)}px`,\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport SchemeBlock from '../SchemeBlock';\n\nimport './index.css';\n\nexport default ({ schemes, onLoadScheme }) => (\n  <div className=\"SchemeBar\">\n    {Object.keys(schemes).map(key => (\n      <SchemeBlock\n        key={key}\n        id={key}\n        scheme={schemes[key]}\n        onLoadScheme={onLoadScheme}\n      />\n    ))}\n  </div>\n);\n","import React, { Component } from 'react';\nimport ReactFavicon from 'react-favicon';\n\nconst SIZE = 32;\n\nclass Favicon extends Component {\n  ref = canvas => {\n    if (!canvas) {\n      return;\n    }\n\n    this.canvas = canvas;\n    this.draw(canvas.getContext('2d'));\n    this.forceUpdate();\n  };\n\n  draw = c => {\n    const { background, foreground } = this.props;\n\n    const skew = SIZE / 16;\n\n    c.clearRect(0, 0, SIZE, SIZE);\n    c.fillStyle = foreground;\n    c.fillRect(0, 0, SIZE, SIZE);\n\n    c.fillStyle = background;\n    c.lineWidth = 0;\n    c.beginPath();\n    c.lineTo(0, 0);\n    c.lineTo(SIZE, 0);\n    c.lineTo(SIZE, SIZE / 2 - skew);\n    c.lineTo(0, SIZE / 2 + skew);\n    c.closePath();\n    c.fill();\n  };\n\n  render() {\n    if (this.canvas) {\n      this.draw(this.canvas.getContext('2d'));\n    }\n    return (\n      <div style={{ display: 'none' }}>\n        <canvas width={SIZE} height={SIZE} ref={this.ref} />\n        {this.canvas && <ReactFavicon url={this.canvas.toDataURL()} />}\n      </div>\n    );\n  }\n}\n\nexport default Favicon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TutorialContainer from '../tutorial-container';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { loadBase16Palette, setColor } from '../../modules/currentPalette';\n\nimport GithubCorner from '../../presentational/GithubCorner';\nimport PageTitle from '../../presentational/TutorialPages/01-Title';\nimport PageInteractive from '../../presentational/TutorialPages/02-Interactive';\nimport SchemeBar from '../../presentational/SchemeBar';\nimport Favicon from '../../presentational/Favicon';\nimport Page from '../../presentational/Page';\nimport Header from '../../presentational/Header';\n\nimport './index.css';\n\nclass Tutorial extends TutorialContainer {\n  render() {\n    const { base, palettes, loadBase16Palette } = this.props;\n    if (!base) {\n      return null;\n    }\n\n    const background = base[0];\n    const foreground = base[7];\n\n    const selectedPalettes = [\n      'solarized-light',\n      'solarized-dark',\n      'solarflare',\n      'tutorial-light',\n    ].reduce(\n      (hash, key) => ({\n        ...hash,\n        [key]: palettes[key],\n      }),\n      {}\n    );\n\n    return (\n      <div className=\"Tutorial\">\n        <Favicon background={background} foreground={foreground} />\n        <GithubCorner />\n        <PageTitle />\n        <PageInteractive base={base} />\n        <Page>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"structure\">Структура</Header>\n            <p>\n              Статья разделена на страницы, каждая состоит из блоков. На\n              заголовок блока можно сослаться, скопировав ссылку рядом с\n              заголовком.\n            </p>\n            <p>\n              Следующая страница — <a href=\"#/color-spaces\">цветовые модели</a>.\n            </p>\n          </div>\n        </Page>\n        <SchemeBar\n          schemes={selectedPalettes}\n          onLoadScheme={loadBase16Palette}\n        />\n      </div>\n    );\n  }\n}\n\nTutorial.propTypes = {\n  all: PropTypes.arrayOf(PropTypes.string),\n  currentPalette: PropTypes.shape({\n    palette: PropTypes.shape({\n      base: PropTypes.arrayOf(PropTypes.string),\n      accents: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n};\n\nconst mapStateToProps = ({ currentPalette, paletteList }) => {\n  const { palettes } = paletteList;\n  const base = [];\n  const accents = [];\n  if (!currentPalette.slots) {\n    return {};\n  }\n  currentPalette.slots.forEach(slot => {\n    if (slot.role === 'accent') {\n      accents.push(...slot.colors);\n    } else {\n      base.push(...slot.colors);\n    }\n  });\n\n  const all = base.concat(accents);\n\n  return {\n    currentPalette,\n    all,\n    accents,\n    base,\n    palettes,\n  };\n};\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ loadBase16Palette, setColor }, dispatch);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Tutorial);\n","import { Vector3 } from 'three';\nimport { rgb } from 'd3-color';\n\nfunction rgbTransform(x) {\n  return 0.466 * x - 59.5;\n}\nexport default function colorToRgbPoint(color) {\n  const { r, g, b } = rgb(color);\n  return new Vector3(rgbTransform(r), rgbTransform(g), rgbTransform(b));\n}\n","export default function objectToArray(o) {\n  return Object.keys(o).map(function(k) {\n    return o[k];\n  });\n}\n","import { Vector3 } from 'three';\nimport { hsl, rgb } from 'd3-color';\nimport { min, max } from 'd3-array';\nimport objectToArray from './objectToArray';\n\nconst axisY = new Vector3(0, 1, 0);\n\nexport default function colorToHsvPoint(color, cone = true) {\n  let { h } = hsl(color);\n  if (isNaN(h)) h = 0;\n\n  const rgbArray = objectToArray(rgb(color)).slice(0, 3);\n\n  const M = max(rgbArray);\n  const m = min(rgbArray);\n  const C = (M - m) / 256;\n  const S = M === 0 ? 0 : 1 - m / M;\n  const hsv = {\n    h,\n    s: cone ? C : S,\n    v: M / 256,\n  };\n\n  hsv.h -= 45;\n  const rad = Math.PI * hsv.h / 180;\n  return new Vector3(hsv.s * 97.15, -103 + 206 * hsv.v, 0).applyAxisAngle(\n    axisY,\n    rad\n  );\n}\n","import { Vector3 } from 'three';\nimport { hsl } from 'd3-color';\n\nconst axisY = new Vector3(0, 1, 0);\n\nexport default function calcHslTarget(color, biCone = true) {\n  let { h, s, l } = hsl(color);\n  if (isNaN(s)) s = 0;\n  if (isNaN(h)) h = 0;\n  h -= 45;\n  const rad = Math.PI * h / 180;\n  const cone = biCone ? 2 * (0.5 - Math.abs(l - 0.5)) : 1;\n  return new Vector3(s * 97.15 * cone, -103 + 206 * l, 0).applyAxisAngle(\n    axisY,\n    rad\n  );\n}\n","import { Vector3 } from 'three';\nimport colorToRgbPoint from './colorToRgbPoint';\n\nconst axisX = new Vector3(1, 0, 0);\nconst axisY = new Vector3(0, 1, 0);\nconst axisZ = new Vector3(0, 0, 1);\nconst angleX = -Math.PI / 4;\nconst angleY = -Math.PI / 4;\nconst angleZ = Math.atan(1 / Math.sqrt(2));\n\nexport default function colorToRotatedRgbPoint(color) {\n  return colorToRgbPoint(color)\n    .applyAxisAngle(axisX, angleX)\n    .applyAxisAngle(axisZ, angleZ)\n    .applyAxisAngle(axisY, angleY);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport TutorialContainer from '../tutorial-container';\nimport colorToRgbPoint from '../../utils/colorToRgbPoint';\nimport colorToHsvPoint from '../../utils/colorToHsvPoint';\nimport colorToHslPoint from '../../utils/colorToHslPoint';\nimport { loadBase16Palette } from '../../modules/currentPalette';\nimport InlineChip from '../../presentational/InlineChip';\nimport GithubCorner from '../../presentational/GithubCorner';\nimport ColorSpace from '../../presentational/ColorSpace';\nimport Favicon from '../../presentational/Favicon';\nimport Header from '../../presentational/Header';\nimport Page from '../../presentational/Page';\n\nimport '../tutorial/index.css';\nimport SchemeBar from '../../presentational/SchemeBar';\nimport Navigation from '../../presentational/Navigation';\nimport colorToRotatedRgbPoint from '../../utils/colorToRotatedRgbPoint';\n\nclass TutorialColorSpaces extends TutorialContainer {\n  render() {\n    const { all, palettes, loadBase16Palette } = this.props;\n    if (!all) {\n      return null;\n    }\n\n    const background = all[0];\n    const foreground = all[7];\n\n    const selectedPalettes = [\n      'solarized-light',\n      'solarized-dark',\n      'solarflare',\n      'tutorial-light',\n    ].reduce(\n      (hash, key) => ({\n        ...hash,\n        [key]: palettes[key],\n      }),\n      {}\n    );\n\n    return (\n      <div className=\"Tutorial\">\n        <Favicon background={background} foreground={foreground} />\n        <GithubCorner />\n        <Page>\n          <div className=\"Tutorial-text\">\n            <h1>Цветовые модели</h1>\n          </div>\n          <Navigation />\n          <div className=\"Tutorial-text\">\n            <Header hash=\"rgb\">RGB</Header>\n            <p>\n              Цвета хранятся и передаются в формате RGB — по байту на каждую из\n              цветовых компонент: красную, зелёную и синию, 256 значений от 0 до\n              255. Комбинация трёх таких компонент даёт почти 17 миллионов\n              цветов. Это — современный минимум, практически любой цветной\n              дисплей может корректно отобразить RGB-цвет.\n            </p>\n            <p>\n              Некоторые устройства могут показать больше различных цветов,\n              например современные МакБуки поддерживают цветовое пространство\n              P3, в нём на четверть больше цветов чем в sRGB. Такие дисплеи\n              буквально могут показать «более красный» цвет, не искажая при этом\n              обычный красный. В этом руководстве я не буду развивать тему\n              широких цветовых пространств.\n            </p>\n            <p>\n              RGB-представление удобно хранить и передавать, но для человека это\n              не лучший формат описания цвета, в RGB трудно оценить\n              характеристики цвета — яркость, насыщенность, тон. Например, если\n              взять три базовых цвета с одинаковой интенсивностью,{' '}\n              <InlineChip color=\"#080\" /> зелёный будет ярче{' '}\n              <InlineChip color=\"#800\" /> красного , а{' '}\n              <InlineChip color=\"#008\" /> синий будет самым тёмным.\n            </p>\n            <p>\n              Отображение цветовой модели в пространстве называют цветовым\n              пространством. Если расставить все RGB-цвета по трём осям,\n              соответствующим каждой из цветовых компонент, мы получим куб:\n            </p>\n            <ColorSpace\n              width={300}\n              height={300}\n              cameraPositionZ={250}\n              colorToPoint={colorToRgbPoint}\n              gridOpacity={1}\n              autoRotate\n            />\n            <p>\n              Наглядно показать в таком виде все 16,7 миллионов цветов не\n              выйдет. Если из 256 значений каждой цветовой компоненты оставить\n              всего 6, мы получим куб из всего 216 точек, на котором можно\n              увидеть и границы цветового пространства и заглянуть вглубь.\n              Опытные веб-дизайнеры и разработчики знают эти 216 цветов под\n              названием «безопасные веб-цвета».\n            </p>\n          </div>\n        </Page>\n        <Page inverse>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"derived\">Производные модели</Header>\n            <p>\n              Если вместо значений цветовых компонент расположить RGB-цвета в\n              пространстве по другим правилам, можно получить производные от RGB\n              цветовые модели.\n            </p>\n            <p>\n              Популярные производные модели — HSL и HSV — используют такие\n              характеристики для описания цвета:\n              <ul>\n                <li>тон (Hue),</li>\n                <li>насыщенность (Saturation)</li>\n                <li>яркость (Lightness) или значение (Value) </li>\n              </ul>\n              Отличаются эти две модели только в последней характеристике: в HSL\n              максимальной яркостью обладает только белый цвет, в HSV\n              максимальное значение будет у всех цветов, в которых хотя бы один\n              из компонентов RGB имеет максимальное значение.\n            </p>\n            <p>\n              Тон может принимать значение от 0° до 360°, остальные параметры —\n              от 0 до 100%. Важное отличие производных моделей от RGB: значения\n              могут быть дробными числами.\n            </p>\n          </div>\n        </Page>\n        <Page>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"derived-3d\">Визуализация производных моделей</Header>\n            <p>\n              При визуализации производных моделей вертикальной осью выбирают\n              линию монохромных цветов от чёрного до белого, с нарастающей\n              яркостью или значением и нулевой насыщенностью. Насыщенность и тон\n              формируют полярную систему координат, в которой угол поворота\n              определяется тоном, а расстояние от вертикальной оси —\n              насыщенностью.\n            </p>\n            <p>\n              Куб RGB тоже можно повернуть так, чтобы диагональ от чёрного до\n              белого цвета совпала с вертикальную осью. В такой конфигурации\n              становится заметно «сродство» цветовых моделей. Теперь мы можем\n              увидеть, как равномерно распределённые в RGB-пространстве цвета\n              отображаются в моделях HSL и HSV:\n            </p>\n          </div>\n          {[colorToRotatedRgbPoint, colorToHslPoint, colorToHsvPoint].map(\n            (fn, i) => (\n              <ColorSpace\n                key={i}\n                width={300}\n                height={300}\n                colorToPoint={a => fn(a, false)}\n                gridOpacity={1}\n                autoRotate\n              />\n            )\n          )}\n          <div className=\"Tutorial-text\">\n            <p>\n              Вместо насыщенности иногда используют характеристику, называемую\n              цветность (Chroma). Она пропорциональна разнице между максимальным\n              и минимальным значением цветовых компонент. У монохромных цветов\n              она равна нулю, а максимальной будет у чистых насыщенных цветов.\n              Замена насыщенности на цветность нагляднее показывает, как отличие\n              между яркостью (Lightness) и значением (Value) по-разному\n              распределяет цвета в пространстве.\n            </p>\n            <p>\n              Вместо цилиндра мы получаем двойной конус для HSL и обычный конус\n              для HSV:\n            </p>\n          </div>\n          {[colorToRotatedRgbPoint, colorToHslPoint, colorToHsvPoint].map(\n            (fn, i) => (\n              <ColorSpace\n                key={i}\n                width={300}\n                height={300}\n                colorToPoint={fn}\n                gridOpacity={1}\n                autoRotate\n              />\n            )\n          )}\n          <p />\n        </Page>\n        <Page>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"hsl\">HSL</Header>\n            <p>\n              Когда мы подбираем цвета, модель HSL удобнее RGB, она позволяет\n              оценивать понятные характеристики цвета.\n            </p>\n            <p>\n              Однако, у неё есть недостатки. Основным я считаю поведение\n              параметра «яркость». В HSL вот эти цвета имеют одинаковую яркость\n              в 50%: <InlineChip color=\"#F00\" /> <InlineChip color=\"#FF0\" />{' '}\n              <InlineChip color=\"#0F0\" /> <InlineChip color=\"#0FF\" />{' '}\n              <InlineChip color=\"#00F\" /> <InlineChip color=\"#F0F\" />. Для\n              сравнения, в RGB эти цвета находятся в разных углах кубика, имея\n              условную яркость (простую сумму значений компонент) 33% (\n              <InlineChip color=\"#F00\" />, <InlineChip color=\"#0F0\" /> и{' '}\n              <InlineChip color=\"#00F\" />) и 66% (\n              <InlineChip color=\"#FF0\" />, <InlineChip color=\"#0FF\" /> и{' '}\n              <InlineChip color=\"#F0F\" />\n              ).\n            </p>\n            <p>\n              Разумеется, это нонсенс. Яркость <InlineChip color=\"#FF0\" /> и{' '}\n              <InlineChip color=\"#00F\" /> не может быть одинаковой. И даже\n              двукратная разница — не похоже на правду, яркость этих цветов\n              отличается куда больше.\n            </p>\n          </div>\n        </Page>\n        <Page inverse>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"lab-hcl\">LAB и HCL</Header>\n            <p>\n              LAB — модель, определённая с учётом того, как наши глаза\n              воспринимают свет. Первый её параметр — яркость (Lightness), а\n              параметры A и B определяют расстояние от центральной оси.\n            </p>\n            <p>\n              В LAB значения яркости для <InlineChip color=\"#FF0\" /> и{' '}\n              <InlineChip color=\"#00F\" /> — 98% и 30%. Это гораздо больше\n              соответствует восприятию.\n            </p>\n            <p>\n              Чтобы проще ориентироваться в цветовом пространстве LAB\n              используйте систему координат HCL (она же LCH). В ней декартовы\n              координаты A и B заменяются полярными — углом H (Hue),\n              обозначающим тон и радиусом C (Chroma).\n            </p>\n            <p>\n              В трёхмерном пространстве LAB все доступные нам цвета образуют не\n              куб или конус, а фигуру сложной формы:\n            </p>\n          </div>\n          <div className=\"Tutorial-wide\">\n            <ColorSpace\n              width={300}\n              height={300}\n              background={foreground}\n              gridOpacity={1}\n              autoRotate\n            />\n          </div>\n          <div className=\"Tutorial-text\">\n            <p>\n              Это и определяет главную сложность использования моделей LAB и\n              HCL: асимметричность. Если у вас есть жёлтый цвет{' '}\n              <InlineChip color=\"#E4EA00\" /> с 90% яркости и 90% насыщенности,\n              то синий цвет вы с такими характеристиками не найдёте, т.к. синяя\n              цветовая компонента имеет гораздо меньшую яркость. Зато, у чистого\n              синего цвета <InlineChip color=\"#00F\" /> насыщенность в модели HCL\n              — 131.\n            </p>\n          </div>\n        </Page>\n        <Page>\n          <div className=\"Tutorial-text\">\n            <p>\n              Дальше — <a href=\"#/color-schemes\">цветовые схемы</a>.\n            </p>\n          </div>\n        </Page>\n        <SchemeBar\n          schemes={selectedPalettes}\n          onLoadScheme={loadBase16Palette}\n        />\n      </div>\n    );\n  }\n}\n\nTutorialColorSpaces.propTypes = {\n  all: PropTypes.arrayOf(PropTypes.string),\n  currentPalette: PropTypes.shape({\n    palette: PropTypes.shape({\n      base: PropTypes.arrayOf(PropTypes.string),\n      accents: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n};\n\nconst mapStateToProps = ({ currentPalette, paletteList }) => {\n  const { palettes } = paletteList;\n  const base = [];\n  const accents = [];\n  if (!currentPalette.slots) {\n    return {};\n  }\n  currentPalette.slots.forEach(slot => {\n    if (slot.role === 'accent') {\n      accents.push(...slot.colors);\n    } else {\n      base.push(...slot.colors);\n    }\n  });\n\n  const all = base.concat(accents);\n\n  return {\n    currentPalette,\n    all,\n    accents,\n    base,\n    palettes,\n  };\n};\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ loadBase16Palette }, dispatch);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TutorialColorSpaces);\n","import React from 'react';\n\nimport './index.css';\n\nconst A = () => 'A';\n\nexport default ({ colors, fn = A }) => (\n  <div className=\"Matrix\">\n    {colors.map((bg, y) => (\n      <div key={y} className=\"MatrixRow\">\n        {colors.map((fg, x) => (\n          <div\n            key={x}\n            className=\"MatrixCell\"\n            style={{\n              color: fg,\n              background: bg,\n            }}\n          >\n            {fn(colors[x], colors[y])}\n          </div>\n        ))}\n      </div>\n    ))}\n  </div>\n);\n","import React from 'react';\nimport Header from '../../Header';\n\nexport default () => (\n  <div>\n    <div className=\"Tutorial-text\">\n      <Header hash=\"colors-on-screen\">Цвета на экране</Header>\n      <p>\n        Перед глазами программиста часто находится среда разработки или\n        терминал. В таких программах обычно можно настроить визуальную «тему»:\n        цвета, шрифты, высоту строк и т.п. Я не буду рассказывать о выборе\n        шрифта и других настройках, ограничусь только цветами.\n      </p>\n    </div>\n  </div>\n);\n","import React from 'react';\nimport Header from '../../Header';\nimport Page from '../../Page';\n\nexport default () => (\n  <Page>\n    <div className=\"Tutorial-text\">\n      <Header hash=\"color-scheme\">Цветовая схема</Header>\n      <p>\n        Набор цветов, используемый в интерфейсе называют цветовой схемой. Кроме\n        сред разработки и терминала, вы можете использовать цветовую схему при\n        разработке интерфейсов и сайтов.\n      </p>\n      <p>\n        По моему наблюдению, в 2007-2012 окружающие меня программисты работали в\n        стандартных темах или меняли цветовую схему на «тёмную», не\n        заморачиваясь выбором конкретных цветов.\n      </p>\n      <p>\n        Со временем ситуация улучшилась — программисты стали активнее\n        экспериментировать с настройками IDE, некоторые сторонние цветовые схемы\n        стали популярными, а стандартную тему многие программисты меняют на\n        любимую сразу после установки программ.\n      </p>\n    </div>\n  </Page>\n);\n","import React from 'react';\n\nimport SyntaxHighlighter from 'react-syntax-highlighter';\n\nexport default ({ colors, children, language }) => {\n  const style = {\n    hljs: {\n      display: 'block',\n      overflowX: 'auto',\n      padding: '0em',\n      background: colors[0],\n      color: colors[6],\n    },\n    'hljs-comment': {\n      color: colors[4],\n    },\n    'hljs-quote': {\n      color: colors[4],\n    },\n    'hljs-keyword': {\n      color: colors[11],\n    },\n    'hljs-selector-tag': {\n      color: colors[11],\n    },\n    'hljs-addition': {\n      color: colors[11],\n    },\n    'hljs-number': {\n      color: colors[12],\n    },\n    'hljs-string': {\n      color: colors[12],\n    },\n    'hljs-meta .hljs-meta-string': {\n      color: colors[12],\n    },\n    'hljs-literal': {\n      color: colors[12],\n    },\n    'hljs-doctag': {\n      color: colors[12],\n    },\n    'hljs-regexp': {\n      color: colors[12],\n    },\n    'hljs-title': {\n      color: colors[13],\n    },\n    'hljs-section': {\n      color: colors[13],\n    },\n    'hljs-name': {\n      color: colors[13],\n    },\n    'hljs-selector-id': {\n      color: colors[13],\n    },\n    'hljs-selector-class': {\n      color: colors[13],\n    },\n    'hljs-attribute': {\n      color: colors[10],\n    },\n    'hljs-attr': {\n      color: colors[10],\n    },\n    'hljs-variable': {\n      color: colors[10],\n    },\n    'hljs-template-variable': {\n      color: colors[10],\n    },\n    'hljs-class .hljs-title': {\n      color: colors[10],\n    },\n    'hljs-type': {\n      color: colors[10],\n    },\n    'hljs-symbol': {\n      color: colors[9],\n    },\n    'hljs-bullet': {\n      color: colors[9],\n    },\n    'hljs-subst': {\n      color: colors[9],\n    },\n    'hljs-meta': {\n      color: colors[9],\n    },\n    'hljs-meta .hljs-keyword': {\n      color: colors[9],\n    },\n    'hljs-selector-attr': {\n      color: colors[9],\n    },\n    'hljs-selector-pseudo': {\n      color: colors[9],\n    },\n    'hljs-link': {\n      color: colors[9],\n    },\n    'hljs-built_in': {\n      color: colors[8],\n    },\n    'hljs-deletion': {\n      color: colors[8],\n    },\n    'hljs-formula': {\n      background: colors[1],\n    },\n    'hljs-emphasis': {\n      fontStyle: 'italic',\n    },\n    'hljs-strong': {\n      fontWeight: 'bold',\n    },\n  };\n\n  return (\n    <SyntaxHighlighter\n      language={language}\n      style={style}\n      showLineNumbers={true}\n      lineNumberContainerStyle={{\n        background: colors[1],\n        color: colors[2],\n        float: 'left',\n        paddingLeft: '10px',\n        paddingRight: '5px',\n      }}\n      lineNumberStyle={{\n        background: colors[1],\n        float: 'right',\n        clear: 'both',\n      }}\n    >\n      {children}\n    </SyntaxHighlighter>\n  );\n};\n","import React from 'react';\n\nconst Tick = ({ tick, r, size }) => (\n  <path\n    strokeWidth={0.25}\n    d={`M0,${-r - size}L0,${-r + size}`}\n    transform={`rotate(${tick})`}\n  />\n);\n\nexport default Tick;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { hcl } from 'd3-color';\nimport { range } from 'd3-array';\nimport Tick from './Tick';\n\nimport './index.css';\n\nconst BIG_TICK_SIZE = 4;\nconst TICK_SIZE = 2;\nconst CIRCLE_RADIUS = 3;\nconst TICKS = range(0, 360, 15);\nconst BIG_TICKS = range(0, 360, 90);\nconst size = 200;\nconst mid = size / 2;\nconst r = size / 3;\n\nclass HueCircle extends Component {\n  render() {\n    const { colors, foreground } = this.props;\n    const { base } = this.context;\n\n    return (\n      <div className=\"HueCircle\">\n        <svg width={size} height={size}>\n          <g\n            transform={`translate(${mid},${mid})`}\n            stroke={foreground || base[7]}\n          >\n            <circle fill=\"none\" strokeWidth={0.25} r={r} />\n            {BIG_TICKS.map((tick, i) => (\n              <Tick key={i} tick={tick} r={r} size={BIG_TICK_SIZE} />\n            ))}\n            {TICKS.map((tick, i) => (\n              <Tick key={i} tick={tick} r={r} size={TICK_SIZE} />\n            ))}\n            {colors.map((color, i) => {\n              const { h } = hcl(color);\n              return (\n                <circle\n                  key={i}\n                  r={CIRCLE_RADIUS}\n                  fill={color}\n                  cy={-r}\n                  transform={`rotate(${h})`}\n                  stroke=\"none\"\n                />\n              );\n            })}\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nHueCircle.propTypes = {\n  colors: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nHueCircle.contextTypes = {\n  base: PropTypes.arrayOf(PropTypes.string),\n};\n\nexport default HueCircle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TutorialContainer from '../tutorial-container';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { loadBase16Palette, setColor } from '../../modules/currentPalette';\n\nimport InlineChip from '../../presentational/InlineChip';\nimport GithubCorner from '../../presentational/GithubCorner';\nimport Matrix from '../../presentational/Matrix';\nimport ColorSpace from '../../presentational/ColorSpace';\nimport Header from '../../presentational/Header';\nimport PageSchemesIntro from '../../presentational/TutorialPages/02-Intro';\nimport PageColorScheme from '../../presentational/TutorialPages/04-ColorScheme';\nimport Page from '../../presentational/Page';\nimport CodeExample from '../../presentational/CodeExample';\nimport HueCircle from '../../presentational/HueCircle';\nimport SchemeBar from '../../presentational/SchemeBar';\nimport Delta from '../../presentational/Delta';\nimport Favicon from '../../presentational/Favicon';\n\nimport delta from '../../utils/delta';\n\nimport './index.css';\nimport Navigation from '../../presentational/Navigation';\n\nconst deltaE = (fg, bg) => Math.round(delta(fg, bg));\n\nconst diff = `\nIndex: languages/ini.js\n=======================================\n--- languages/ini.js    (revision 199)\n+++ languages/ini.js    (revision 200)\n@@ -1,8 +1,7 @@\n hljs.LANGUAGES.ini =\n {\n   case_insensitive: true,\n-  defaultMode:\n-  {\n+  defaultMode: {\n     contains: ['comment', 'title', 'setting'],\n     illegal: '[^\\\\\\\\s]'\n   },\n`;\n\nconst inlineChip = color => <InlineChip key={color} color={color} />;\n\nclass Tutorial extends TutorialContainer {\n  render() {\n    const {\n      base,\n      accents,\n      all,\n      palettes,\n      loadBase16Palette,\n      selectColor,\n      modifyCurrentColor,\n    } = this.props;\n    if (!base) {\n      return null;\n    }\n\n    const extremal = [\n      '#000',\n      '#00F',\n      '#F00',\n      '#F0F',\n      '#0F0',\n      '#0FF',\n      '#FF0',\n      '#FFF',\n    ];\n\n    const allInverted = [...[...base].reverse(), ...accents];\n\n    const background = base[0];\n    const foreground = base[7];\n\n    const selectedPalettes = [\n      'solarized-light',\n      'solarized-dark',\n      'solarflare',\n      'tutorial-light',\n    ].reduce(\n      (hash, key) => ({\n        ...hash,\n        [key]: palettes[key],\n      }),\n      {}\n    );\n\n    const colorPicked = index => color => {\n      this.props.setColor(index, color);\n    };\n\n    return (\n      <div className=\"Tutorial\">\n        <Favicon background={background} foreground={foreground} />\n        <GithubCorner />\n        <Page>\n          <div className=\"Tutorial-text\">\n            <h1>Цветовые схемы</h1>\n          </div>\n          <Navigation />\n        </Page>\n        <PageSchemesIntro />\n        <PageColorScheme />\n        <Page inverse>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"modern-schemes\">Современные схемы</Header>\n            <p>\n              В этом документе я ссылаюсь на современные цветовые схемы и\n              стандарт их разработки —{' '}\n              <a href=\"http://chriskempson.com/projects/base16/\">base16</a>.\n            </p>\n            <p>\n              В 2011{' '}\n              <a href=\"https://twitter.com/ethanschoonover\">Этан Скуноувер</a>{' '}\n              представил цветовую схему{' '}\n              <a href=\"http://ethanschoonover.com/solarized\">Solarized</a>. Я\n              использую эту схему в своих IDE и терминалах. И в этом документе\n              по умолчанию используется именно она.\n            </p>\n            <p>\n              В 2013 <a href=\"https://twitter.com/atelierbram/\">Брам Де-Хен</a>{' '}\n              создал набор схем{' '}\n              <a href=\"http://atelierbram.github.io/syntax-highlighting/atelier-schemes/\">\n                Atelier\n              </a>\n              .\n            </p>\n            <p>\n              В 2016{' '}\n              <a href=\"https://twitter.com/trevordmiller\">Тревор Миллер</a>{' '}\n              представил схему{' '}\n              <a href=\"https://trevordmiller.com/projects/nova\">Nova</a>.\n            </p>\n            <p>\n              В 2018 <a href=\"https://twitter.com/sarah_edo\">Сара Драснер</a>{' '}\n              создала тему{' '}\n              <a href=\"https://github.com/sdras/night-owl-vscode-theme\">\n                Night Owl\n              </a>\n              , использующую одноименную цветовую схему.\n            </p>\n          </div>\n        </Page>\n        <div className=\"Tutorial-page\">\n          <div className=\"Tutorial-text\">\n            <Header hash=\"scheme-anatomy\">Состав схемы</Header>\n            <p>Стандарт base16 предлагает собирать схему из 16 цветов:</p>\n            <ul>\n              <li>\n                8 в основной последовательности,{' '}\n                <InlineChip color={background} />\n                первый из которых является основным цветом фона а{' '}\n                <InlineChip color={foreground} />\n                последний — основным цветом текста.\n              </li>\n              <li>\n                8 акцентных, использующихся для выделения текста или фона по\n                смыслу.\n              </li>\n            </ul>\n          </div>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"scheme-base\">Восемь основных оттенков</Header>\n            <p>\n              Основная последовательность {base.map(inlineChip)} состоит из трёх\n              групп.\n            </p>\n            <p>\n              Фоны: <InlineChip color={base[0]} />\n              основной и <InlineChip color={base[1]} />\n              альтернативный (например, для выделения текущей строки в\n              редакторе).\n            </p>\n            <p>\n              Промежуточные цвета: <InlineChip color={base[2]} />\n              <InlineChip color={base[3]} />\n              <InlineChip color={base[4]} />\n              <InlineChip color={base[5]} />. Ими рисуют второстепенный текст\n              (номера строк, ключевые слова языка программирования), линейки и\n              границы.\n            </p>\n            <p>\n              Цвета текста: <InlineChip color={base[6]} />\n              приглушённый и <InlineChip color={base[7]} />\n              основной.\n            </p>\n            <p>\n              В большинстве base16-совместимых схем основную последовательность\n              можно развернуть, поменяв порядок цветов. При переносе цветов в\n              файлы, импортируемые в настройки программ, такие схемы публикуют в\n              двух версиях, светлой и тёмной. В этом документе я иногда\n              «разворачиваю» схему, чтобы вы увидели как она работает в\n              инверсии.\n            </p>\n          </div>\n          <div className=\"Tutorial-text\">\n            <Matrix colors={base} />\n          </div>\n          <div className=\"Tutorial-text\">\n            <p>\n              В таблице показано, как будет выглядеть сочетание текста и фона.\n              Если цветовая схема спроектирована правильно, цвета каждой из\n              групп будут контрастны с остальными группами.\n            </p>\n            <p>\n              Обратите внимание, как группы цветов расположены в LAB-модели:\n            </p>\n          </div>\n          <div className=\"Tutorial-wide\">\n            <ColorSpace width={600} height={400} colors={base} />\n          </div>\n          <div className=\"Tutorial-text\">\n            <p>\n              В цветовой схеме solarized группы цветов отделены друг от друга,\n              при этом внутри группы расстояние не так велико.\n            </p>\n          </div>\n        </div>\n        <Page inverse>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"accents\">Акценты</Header>\n            <p>\n              Акценты {accents.map(inlineChip)} не делятся на группы, каждый из\n              них должен заметно отличаться от всех остальных цветов в схеме.\n              Тем не менее, я делю цвета по «температуре», чтобы было легче\n              ориентироваться.\n            </p>\n            <p>\n              Чаще всего акценты отличаются цветовым тоном, а яркость и\n              насыщенность могут быть практически одинаковы. Посмотрите:\n            </p>\n          </div>\n          <div className=\"Tutorial-wide\">\n            <ColorSpace\n              width={600}\n              height={400}\n              colors={accents}\n              background={base[7]}\n            />\n          </div>\n          <div className=\"Tutorial-text\">\n            <p>\n              Если не учитывать яркость и насыщенность, можно изучить\n              распределение акцентов по тонам. Если точки распределены\n              неравномерно, на окружности будут видны пустые области — это те\n              тона, которые можно использовать для увеличения контрастности\n              акцентов.\n            </p>\n          </div>\n          <div className=\"Tutorial-wide\">\n            <HueCircle foreground={base[0]} colors={accents} />\n          </div>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"warm-colors\">Тёплые цвета</Header>\n            <p>\n              Два цвета, которые используются часто и несут определённый смысл —{' '}\n              <InlineChip color={accents[0]} /> красный и{' '}\n              <InlineChip color={accents[3]} /> зелёный. Например, удалённые и\n              добавленные строки при просмотре патчей:\n            </p>\n            <CodeExample colors={allInverted} language=\"diff\">\n              {diff}\n            </CodeExample>\n            <p>\n              Тёплые цвета, включая <InlineChip color={accents[1]} /> оранжевый\n              и <InlineChip color={accents[2]} /> жёлтый, часто используются в\n              интерфейсах для обозначения приоритетов, состояний (ошибка,\n              предупреждение), разрешений.\n            </p>\n            <Header hash=\"cold-colors\">Холодные цвета</Header>\n            <p>\n              Холодными чаще всего будут три акцента, с четвёртого по седьмой:{' '}\n              <InlineChip color={accents[4]} />\n              <InlineChip color={accents[5]} />\n              <InlineChip color={accents[6]} />. Эта часть палитры часто\n              используется в средах разработки для выделения ключевых слов,\n              строк, идентификаторов.\n            </p>\n            <Header hash=\"line-of-purple\">Пурпурные цвета</Header>\n            <p>\n              Восьмой цвет <InlineChip color={accents[7]} /> отличается от\n              остальных, он чаще всего попадает в т.н.{' '}\n              <a href=\"https://en.wikipedia.org/wiki/Line_of_purples\">\n                пурпурную линию\n              </a>\n              , группу цветов между красным и фиолетовым. Их отличие от\n              спектральных цветов в том, что такой цвет не может быть\n              монохроматичным, его нельзя получить излучением одного лазера.\n              Такой цвет нельзя назвать ни тёплым ни холодным, его оттенок будет\n              восприниматься как тёплый или холодный в зависимости от фона, на\n              котором вы его увидите.\n            </p>\n          </div>\n          <div className=\"Tutorial-wide\">\n            <Header hash=\"full-palette\">Все цвета схемы</Header>\n            <p>Посмотрим на расположение всех цветов схемы в пространстве:</p>\n            <ColorSpace\n              width={600}\n              height={400}\n              colors={all}\n              background={base[7]}\n            />\n          </div>\n          <div className=\"Tutorial-text\">\n            <p>\n              В большинстве схем акценты образуют окружность, примерно через\n              центр которой проходит линия основной последовательности.\n            </p>\n          </div>\n        </Page>\n        <div className=\"Tutorial-text\">\n          <Header hash=\"delta-e-formula\">Формула цветового различия</Header>\n          <p>\n            Перед тем, как перейти к созданию собственной схемы, важно понимать\n            как оценивать разницу между цветами. Для этого используется формула\n            цветового различия — формула, принимающая на вход два цвета и\n            возвращающая число, показывающее различие между двумя цветами.\n          </p>\n          <p>\n            Короткое название формулы — дельта-е. Она существует в трёх версиях:\n            1976, 1994 и 2000 года. В версии 1976 года дельта-е пропорциональна\n            линейному расстоянию в LAB-модели. Обновлённые версии учитывают\n            нелинейность LAB-модели. В этом документе используется формула 2000\n            года.\n          </p>\n          <p>\n            Примеры результатов её применения:\n            <br />\n            <Delta c1=\"#FFF\" c2=\"#00F\" />\n            <br />\n            <Delta c1=\"#FFF\" c2=\"#000\" />\n            <br />\n            <Delta c1=\"#FF0\" c2=\"#000\" />\n            <br />\n            <Delta c1=\"#0F0\" c2=\"#F0F\" />\n            <br />\n            <Delta c1=\"#0F0\" c2=\"#00F\" />\n            <br />\n          </p>\n          <p>\n            Формулу можно применить и к цветовой схеме, чтобы численно оценить\n            различие между цветами фона и текста:\n          </p>\n          <Matrix colors={base} fn={deltaE} />\n          <p>\n            Различие между цветами меньше <strong>5</strong> говорит о том, что\n            пару цветов можно различить только поставив рядом две крупных\n            прямоугольника, в других ситуациях цвета различить проблематично:{' '}\n            <Delta c1=\"#000\" c2=\"#000009\" />.\n          </p>\n          <p>\n            Различие порядка <strong>15</strong> уже можно разглядеть:{' '}\n            <Delta c1=\"#000\" c2=\"#00052A\" />.\n          </p>\n          <p>\n            <strong>30</strong> единиц различия дают ощутимо разные цвета:{' '}\n            <Delta c1=\"#000\" c2=\"#00498C\" />.\n          </p>\n          <p>\n            <strong>50</strong> единиц — достаточная контрастность для\n            использования пары цветов для текста и фона:{' '}\n            <Delta c1=\"#000\" c2=\"#0088FF\" />.\n          </p>\n          <p>\n            Теперь посмотрим на полную таблицу различий цветов текущей цветовой\n            схемы:\n          </p>\n          <Matrix colors={all} fn={deltaE} />\n          <p>\n            Дельта-е между разными акцентными цветами и цветами основной\n            последовательности отличается, но в хорошей цветовой схеме цвета\n            фона и текста контрастны (ΔE > 30) относительно всех акцентных\n            цветов.\n          </p>\n        </div>\n        <div className=\"Tutorial-page\">\n          <div className=\"Tutorial-text\">\n            <p>Следующий шаг — создание цветовой схемы.</p>\n          </div>\n        </div>\n        <SchemeBar\n          schemes={selectedPalettes}\n          onLoadScheme={loadBase16Palette}\n        />\n      </div>\n    );\n  }\n}\n\nTutorial.propTypes = {\n  all: PropTypes.arrayOf(PropTypes.string),\n  currentPalette: PropTypes.shape({\n    palette: PropTypes.shape({\n      base: PropTypes.arrayOf(PropTypes.string),\n      accents: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n};\n\nconst mapStateToProps = ({ currentPalette, paletteList }) => {\n  const { palettes } = paletteList;\n  const base = [];\n  const accents = [];\n  if (!currentPalette.slots) {\n    return {};\n  }\n  currentPalette.slots.forEach(slot => {\n    if (slot.role === 'accent') {\n      accents.push(...slot.colors);\n    } else {\n      base.push(...slot.colors);\n    }\n  });\n\n  const all = base.concat(accents);\n\n  return {\n    currentPalette,\n    all,\n    accents,\n    base,\n    palettes,\n  };\n};\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ loadBase16Palette, setColor }, dispatch);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Tutorial);\n","import { lab, hcl } from 'd3-color';\nimport { range, sum, min } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { interpolateHcl } from 'd3-interpolate';\nimport delta from './delta';\n\nexport default function generateAccents(base) {\n  const baseScale = scaleLinear()\n    .range([base[0], base[7]])\n    .interpolate(interpolateHcl);\n\n  const midColor = baseScale(0.5);\n  const { l, a, b } = lab(midColor);\n\n  const sin = h => Math.sin((h * Math.PI) / 180);\n  const cos = h => Math.cos((h * Math.PI) / 180);\n\n  const hues = [25, 45, 70, 120, 160, 200, 270, 340];\n  let bestAccents = [];\n  let bestAccentsRank = -Infinity;\n\n  const edgeDelta = a => Math.min(delta(a, base[0]), delta(a, base[7]));\n  const getAccentsRank = accents =>\n    min(accents, edgeDelta) > 35 ? sum(accents, edgeDelta) : 0;\n  const hueDiff = s => h =>\n    Math.min(Math.abs(h - s), Math.abs(h - s - 360), Math.abs(h - s + 360));\n\n  range(0.1, 1.01, 0.1).forEach(hueDiffImpact => {\n    range(0, 360.0001, 5).forEach(lH => {\n      range(10, 100).some(r => {\n        const newAccents = hues.map(h =>\n          lab(\n            l + (hueDiff(lH)(h) - 90) * hueDiffImpact,\n            a + r * cos(h),\n            b + r * sin(h)\n          )\n        );\n\n        const goodAccents = newAccents.every(c => c.displayable());\n        if (goodAccents) {\n          const rank = getAccentsRank(newAccents);\n          if (rank > bestAccentsRank) {\n            bestAccents = newAccents;\n            bestAccentsRank = rank;\n          }\n        }\n        return !goodAccents;\n      });\n    });\n  });\n  console.log(bestAccentsRank);\n\n  return bestAccents;\n}\n","import React from 'react';\nimport SchemeBlock from '../SchemeBlock';\n\nimport './index.css';\n\nexport default ({ schemes, onLoadScheme }) => (\n  <div className=\"SchemeTable\">\n    {Object.keys(schemes).map(key => (\n      <SchemeBlock\n        key={key}\n        id={key}\n        scheme={schemes[key]}\n        onLoadScheme={onLoadScheme}\n      />\n    ))}\n  </div>\n);\n","import { rgb } from 'd3-color';\n\nconst cache = new Map();\n\nexport default function rgbCached(color) {\n  const key = Object.values(color).join('-');\n\n  let result = cache.get(key);\n  if (!result) {\n    const { r, g, b } = rgb(color);\n    const result1 = [r, g, b];\n    cache.set(key, result1);\n    result = result1;\n  }\n\n  return result;\n}\n","import React, { Component } from 'react';\nimport { hcl, rgb } from 'd3-color';\nimport rgbCached from '../../utils/rgb';\nimport Chip from '../Chip';\nimport { range } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\n\nimport './index.css';\n\nclass SinglePicker extends Component {\n  constructor(props) {\n    super(props);\n    const { width, height, scale = 1 } = props;\n    const ratio = 1;\n    const rs = ratio * scale;\n\n    this.state = {\n      rs,\n      scaledWidth: width * ratio,\n      scaledHeight: height * ratio,\n      limitX: scaleLinear()\n        .domain([0, width])\n        .range([0, width])\n        .clamp(true),\n      limitY: scaleLinear()\n        .domain([0, height])\n        .range([0, height])\n        .clamp(true),\n    };\n  }\n\n  getNewColor = ({ clientX, clientY, target }) => {\n    const { scale = 1, height, dimensions, color, model } = this.props;\n    const { limitX, limitY } = this.state;\n    const { top, left } = target.getBoundingClientRect();\n\n    const x = limitX(clientX - left - 5) / scale;\n    const y = limitY(height - clientY + top + 5) / scale;\n    const newColor = model(color);\n    newColor[dimensions[0]] = x;\n    newColor[dimensions[1]] = y;\n\n    if (newColor.displayable()) {\n      return newColor;\n    }\n    return null;\n  };\n\n  onMouseDown = () => {\n    this.isMouseDown = true;\n  };\n\n  onMouseUp = () => {\n    this.isMouseDown = false;\n\n    const { newColor } = this.state;\n    if (newColor) {\n      this.props.setColor(newColor);\n    }\n  };\n\n  componentWillReceiveProps() {\n    this.setState({ newColor: null });\n  }\n\n  onMouseMove = e => {\n    if (!this.isMouseDown) {\n      return;\n    }\n    const newColor = this.getNewColor(e);\n    if (newColor) {\n      this.setState({ newColor });\n    }\n  };\n\n  draw = () => {\n    const { color, dimensions, model } = this.props;\n    if (color === this.drawnColor) {\n      return;\n    }\n    this.drawnColor = color;\n\n    const { newColor, rs, scaledWidth, scaledHeight } = this.state;\n\n    const colorToDisplay = model(newColor || color);\n\n    const imageData = this.context2d.createImageData(scaledWidth, scaledHeight);\n    let position = 0;\n    range(0, scaledHeight).forEach(y => {\n      range(0, scaledWidth).forEach(x => {\n        colorToDisplay[dimensions[0]] = x / rs;\n        colorToDisplay[dimensions[1]] = (scaledHeight - y) / rs;\n        const displayable = colorToDisplay.displayable();\n        if (!displayable) {\n          // position += 4;\n          // return;\n        }\n        let r, g, b;\n        if (model === rgb) {\n          r = colorToDisplay.r;\n          g = colorToDisplay.g;\n          b = colorToDisplay.b;\n        } else {\n          [r, g, b] = rgbCached(colorToDisplay);\n        }\n        imageData.data[position] = r;\n        imageData.data[position + 1] = g;\n        imageData.data[position + 2] = b;\n        imageData.data[position + 3] = displayable ? 255 : 25;\n        position += 4;\n      });\n    });\n    this.context2d.putImageData(imageData, 0, 0);\n  };\n\n  ref = canvas => {\n    if (!canvas) {\n      return;\n    }\n\n    this.context2d = canvas.getContext('2d');\n    this.draw();\n  };\n\n  render() {\n    const { model, color, dimensions, height, scale = 1 } = this.props;\n    const { newColor } = this.state;\n\n    if (this.context2d) {\n      this.draw();\n    }\n    const style = {\n      width: this.props.width + 10 + 'px',\n      height: this.props.height + 10 + 'px',\n      position: 'relative',\n    };\n    const styleInner = {\n      width: this.props.width + 'px',\n      height: this.props.height + 'px',\n      left: '0px',\n      top: '0px',\n      position: 'absolute',\n    };\n    const styleSvg = {\n      width: this.props.width + 10 + 'px',\n      height: this.props.height + 10 + 'px',\n      left: '0px',\n      top: '0px',\n      position: 'absolute',\n    };\n    const effectiveColor = newColor || color;\n    const colorToDisplay = model(effectiveColor);\n    const cx = colorToDisplay[dimensions[0]] * scale;\n    const cy = height - colorToDisplay[dimensions[1]] * scale;\n    return (\n      <div style={style}>\n        <canvas\n          className=\"Picker-canvas\"\n          width={this.state.scaledWidth}\n          height={this.state.scaledHeight}\n          style={styleInner}\n          ref={this.ref}\n        />\n        <svg\n          className=\"Picker-svg\"\n          style={styleSvg}\n          onMouseMove={this.onMouseMove}\n          onMouseDown={this.onMouseDown}\n          onMouseUp={this.onMouseUp}\n          onMouseOut={this.onMouseUp}\n        >\n          <g transform=\"translate(5,5)\">\n            <circle\n              fill={effectiveColor}\n              strokeWidth={0.75}\n              stroke=\"black\"\n              r=\"5\"\n              cx={cx}\n              cy={cy}\n            />\n            <circle\n              fill=\"transparent\"\n              strokeWidth={0.75}\n              stroke=\"white\"\n              r=\"4\"\n              cx={cx}\n              cy={cy}\n            />\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nclass Picker extends Component {\n  setColor = color => {\n    this.props.onColorPicked(color);\n  };\n\n  render() {\n    const { color, onClose } = this.props;\n    const { setColor } = this;\n    const style = {\n      background: color,\n    };\n    return (\n      <div className=\"Picker\" style={style}>\n        <div className=\"Picker-left\">\n          <SinglePicker\n            width={360}\n            height={132}\n            setColor={setColor}\n            color={color}\n            dimensions={['h', 'c']}\n            model={hcl}\n          />\n          <br />\n          <SinglePicker\n            width={360}\n            height={100}\n            setColor={setColor}\n            color={color}\n            dimensions={['h', 'l']}\n            model={hcl}\n          />\n        </div>\n        <div className=\"Picker-right\">\n          <SinglePicker\n            width={264}\n            height={200}\n            setColor={setColor}\n            color={color}\n            dimensions={['c', 'l']}\n            scale={2}\n            model={hcl}\n          />\n        </div>\n        <div className=\"Picker-right\">\n          <Chip color={color} onClick={onClose} />\n        </div>\n        <div className=\"Picker-left\">\n          <div className=\"Picker-right\">\n            <SinglePicker\n              width={256}\n              height={256}\n              setColor={setColor}\n              color={color}\n              dimensions={['r', 'g']}\n              model={rgb}\n            />\n          </div>\n          <div className=\"Picker-right\">\n            <SinglePicker\n              width={256}\n              height={256}\n              setColor={setColor}\n              color={color}\n              dimensions={['g', 'b']}\n              model={rgb}\n            />\n          </div>\n          <div className=\"Picker-right\">\n            <SinglePicker\n              width={256}\n              height={256}\n              setColor={setColor}\n              color={color}\n              dimensions={['b', 'r']}\n              model={rgb}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Picker;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TutorialContainer from '../tutorial-container';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport isEqual from 'lodash.isequal';\nimport { scaleLinear } from 'd3-scale';\nimport { interpolateHcl } from 'd3-interpolate';\n\nimport { loadBase16Palette, setColor } from '../../modules/currentPalette';\nimport generateAccents from '../../utils/generateAccents';\n\nimport Chip from '../../presentational/Chip';\nimport GithubCorner from '../../presentational/GithubCorner';\nimport Header from '../../presentational/Header';\nimport Page from '../../presentational/Page';\nimport SchemeTable from '../../presentational/SchemeTable';\nimport Picker from '../../presentational/Picker';\nimport ColorSpace from '../../presentational/ColorSpace';\nimport Matrix from '../../presentational/Matrix';\n\nimport '../tutorial/index.css';\nimport delta from '../../utils/delta';\nimport Navigation from '../../presentational/Navigation';\n\nconst deltaE = (fg, bg) => Math.round(delta(fg, bg));\n\nclass TutorialCreateScheme extends TutorialContainer {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentColor: null,\n    };\n  }\n\n  render() {\n    const {\n      base,\n      all,\n      palettes,\n      loadBase16Palette,\n      currentPalette,\n    } = this.props;\n    if (!base) {\n      return null;\n    }\n\n    const baseScale = scaleLinear()\n      .range([base[0], base[7]])\n      .interpolate(interpolateHcl);\n\n    const vs = [0, 0.07, 0.41, 0.47, 0.53, 0.59, 0.93, 1];\n    // const vs = range(0, 1, 0.1);\n    const interpolatedBase = vs.map(baseScale);\n    interpolatedBase.forEach(z => {\n      console.log(`%c ${z}`, `background: ${z}`);\n    });\n\n    const suggestedAccents = generateAccents(base);\n\n    const selectedPalettes = [\n      'solarized-light',\n      'solarized-dark',\n      'tutorial-light',\n      'tutorial-dark',\n\n      'summerfruit-dark',\n      'summerfruit-light',\n      'solarflare',\n      'dracula',\n\n      'atelier-cave',\n      'atelier-cave-light',\n      'atelier-forest',\n      'atelier-forest-light',\n\n      'atelier-heath-light',\n      'atelier-heath',\n      'atelier-estuary-light',\n      'atelier-estuary',\n\n      'atelier-lakeside',\n      'atelier-lakeside-light',\n      'atelier-seaside',\n      'atelier-seaside-light',\n\n      'atelier-dune-light',\n      'atelier-dune',\n      'atelier-savanna-light',\n      'atelier-savanna',\n    ].reduce(\n      (hash, key) => ({\n        ...hash,\n        [key]: palettes[key],\n      }),\n      {}\n    );\n\n    const colorPicked = index => color => {\n      this.props.setColor(index, color);\n    };\n\n    const editColor = indices => () => {\n      this.setState({\n        currentColor: indices,\n      });\n    };\n\n    const colorPicker = indices => {\n      const color = currentPalette.slots[indices[0]].colors[indices[1]];\n      return (\n        <div>\n          <Chip color={color} onClick={editColor(indices)} />\n          {isEqual(indices, this.state.currentColor) && (\n            <Picker\n              color={color}\n              onColorPicked={colorPicked(indices)}\n              onClose={editColor(null)}\n            />\n          )}\n        </div>\n      );\n    };\n\n    const allColors = interpolatedBase.concat(suggestedAccents);\n    return (\n      <div className=\"Tutorial\">\n        <GithubCorner />\n        <Page>\n          <div className=\"Tutorial-text\">\n            <h1>Создание цветовой схемы</h1>\n          </div>\n          <Navigation />\n        </Page>\n        <Page>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"start\">Выбор основы</Header>\n            <p>\n              Выберите заготовку — одну из существующих схем. Это позволит не\n              создавать палитру с нуля, а начать с уже работающего сочетания\n              цветов и менять цвет за цветом на свой вкус. Если хотите дать\n              полёт фантазии — берите одну из схем tutorial, это максимально\n              контрастные и простые схемы.\n            </p>\n          </div>\n        </Page>\n        <Page>\n          <div className=\"Tutorial-text\">\n            <SchemeTable\n              schemes={selectedPalettes}\n              onLoadScheme={loadBase16Palette}\n            />\n          </div>\n        </Page>\n        <Page inverse>\n          <div className=\"Tutorial-text\">\n            <Header hash=\"select-base-colors\">\n              Выбор цветов основной последовательности\n            </Header>\n            <p>\n              Начнём с основного цвета фона. Клик на плашку ведёт на выбор\n              цвета.\n            </p>\n            {colorPicker([0, 0])}\n            <p>Теперь цвет текста.</p>\n            {colorPicker([1, 3])}\n            <p>Давайте посмотрим на промежуточные цвета.</p>\n            {interpolatedBase.map(c => (\n              <Chip key={c} color={c} />\n            ))}\n            <ColorSpace\n              width={600}\n              height={400}\n              colors={interpolatedBase}\n              background={base[7]}\n            />\n            {/*<Matrix colors={base} fn={deltaE} />*/}\n            <Matrix colors={allColors} fn={deltaE} />\n            <br />\n            <p>И на акценты</p>\n            {suggestedAccents.map(c => (\n              <Chip key={c} color={c} />\n            ))}\n            <ColorSpace\n              width={600}\n              height={400}\n              colors={allColors}\n              background={base[7]}\n            />\n            <ColorSpace\n              width={600}\n              height={400}\n              colors={all}\n              background={base[7]}\n            />\n            <br />\n            <br />\n            <br />\n            <br />\n          </div>\n        </Page>\n      </div>\n    );\n  }\n}\n\nTutorialCreateScheme.propTypes = {\n  all: PropTypes.arrayOf(PropTypes.string),\n  currentPalette: PropTypes.shape({\n    palette: PropTypes.shape({\n      base: PropTypes.arrayOf(PropTypes.string),\n      accents: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n};\n\nconst mapStateToProps = ({ currentPalette, paletteList }) => {\n  const { palettes } = paletteList;\n  const base = [];\n  const accents = [];\n  if (!currentPalette.slots) {\n    return {};\n  }\n  currentPalette.slots.forEach(slot => {\n    if (slot.role === 'accent') {\n      accents.push(...slot.colors);\n    } else {\n      base.push(...slot.colors);\n    }\n  });\n\n  const all = base.concat(accents);\n\n  return {\n    currentPalette,\n    all,\n    accents,\n    base,\n    palettes,\n  };\n};\n\nconst mapDispatchToProps = dispatch =>\n  bindActionCreators({ loadBase16Palette, setColor }, dispatch);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TutorialCreateScheme);\n","import React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport Tutorial from '../tutorial';\nimport TutorialColorSpaces from '../tutorial-color-spaces';\nimport TutorialColorSchemes from '../tutorial-color-schemes';\nimport TutorialCreateScheme from '../tutorial-create-scheme';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport './index.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Route exact={true} path=\"/\" component={Tutorial} />\n        <Route\n          exact={true}\n          path=\"/color-spaces\"\n          component={TutorialColorSpaces}\n        />\n        <Route\n          exact={true}\n          path=\"/color-schemes\"\n          component={TutorialColorSchemes}\n        />\n        <Route\n          exact={true}\n          path=\"/create-scheme\"\n          component={TutorialCreateScheme}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = () => ({});\nconst mapDispatchToProps = dispatch => bindActionCreators({}, dispatch);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  null,\n  {\n    pure: false,\n  }\n)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'react-router-redux';\nimport store, { history } from './store';\nimport App from './containers/app';\nimport registerServiceWorker from './registerServiceWorker';\n\nimport 'sanitize.css/sanitize.css';\nimport './index.css';\nwindow.__REACT_DEVTOOLS_GLOBAL_HOOK__ = {};\nconst target = document.querySelector('#root');\n\nrender(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  target\n);\n\nregisterServiceWorker();\n"],"sourceRoot":""}